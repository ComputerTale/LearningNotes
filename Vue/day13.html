<html>
<head>
  <title>day13</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/601535 (zh-CN, DDL); Windows/10.0.0 (Win64); EDAMVersion=V2;"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="1387"/>
<h1>day13</h1>

<div>
<span><div><div>上节已经学了组件之间传值的三种方式，但是这些方式只适用于传值，而不适用于传HTML代码（不是说不能，只是比较复杂，可以将HTML当做字符串传，然后通过v-html将字符串转成HTML）</div><div>这节将讲述<span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">插槽slot</span></div><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;"><br/></span></div><div><span>具体实例：</span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>父组件中</div><div>&lt;!-- 通过子组件中插入HTML代码</div><div>可以将这些代码传过去，子组件通过slot插槽直接使用 --&gt;</div><div>&lt;app-quote :quote=&quot;quote&quot;&gt;</div><div>&lt;h2&gt;The Quote&lt;/h2&gt;</div><div>&lt;p&gt;A wonderful Quote&lt;/p&gt;</div><div>&lt;/app-quote&gt;</div><div><br/></div><div>子组件中</div><div>&lt;!-- 插槽 --&gt;</div><div>&lt;slot&gt;&lt;/slot&gt;</div></div><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">要注意的两点</span>：</div><div>一：</div><div>父组件插入到子组件的HTML代码不会被父组件的样式渲染，而是被子组件的样式渲染</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>父组件</div><div>h2{</div><div>color:red;</div><div>}</div><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">无效</span></div><div><br/></div><div>子组件</div><div>h2{</div><div>color:red;</div><div>}</div><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">有效</span></div></div><div>二:</div><div>父组件插入到子组件的HTML代码可以使用父组件的Vue实例<br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>父组件中</div><div>&lt;!-- 通过子组件中插入HTML代码</div><div>可以将这些代码传过去，子组件通过slot插槽直接使用 --&gt;</div><div>&lt;app-quote :quote=&quot;quote&quot;&gt;</div><div>&lt;h2&gt;<span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">{{ quoteTitle }}</span>&lt;/h2&gt;</div><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">有效</span></div><div>&lt;p&gt;A wonderful Quote&lt;/p&gt;</div><div>&lt;/app-quote&gt;</div><div><br/></div><div>export default {</div><div>components:{</div><div>'app-quote':Quote</div><div>},</div><div>data(){</div><div>return {</div><div>quoteTitle:'The Quote!'</div><div>}</div><div>}</div><div>}</div></div><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">总结：对于插入到子组件的HTML，逻辑代码部分是在父组件中实现，样式部分是在子组件中实现。原因是代码作用域和样式作用域不一样</span></div><hr/><div>通过给slot命名实现在子组件中的分块使用</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>父组件中</div><div>&lt;!-- 通过子组件中插入HTML代码</div><div>可以将这些代码传过去，子组件通过slot插槽直接使用 --&gt;</div><div>&lt;app-quote :quote=&quot;quote&quot;&gt;</div><div>&lt;!-- slot标签不是HTML原生的，被Vue所识别 --&gt;</div><div>&lt;h2 <span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">slot=&quot;title&quot;</span>&gt;{{ quoteTitle }}&lt;/h2&gt;</div><div>&lt;p <span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">slot=&quot;content&quot;</span>&gt;A wonderful Quote&lt;/p&gt;</div><div>&lt;/app-quote&gt;</div><div><br/></div><div>子组件中</div><div>&lt;div class=&quot;title&quot;&gt;</div><div>&lt;!-- 插槽 --&gt;</div><div>&lt;slot <span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">name=&quot;title&quot;</span>&gt;&lt;/slot&gt;</div><div>&lt;/div&gt;</div><div>&lt;hr&gt;</div><div>&lt;div&gt;</div><div>&lt;slot <span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">name=&quot;content&quot;</span>&gt;&lt;/slot&gt;</div><div>&lt;/div&gt;</div></div><div>如果父组件不给插槽命名，Vue会将这个插槽作为一个<span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">默认插槽</span>，子组件中使用这个默认插槽也不需要命名</div><hr/><div>如果子组件中使用的命名插槽并未得到父组件的传值，则可以使用默认的值</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>&lt;div class=&quot;title&quot;&gt;</div><div>&lt;!-- 插槽 --&gt;</div><div>&lt;slot name=&quot;title&quot;&gt;&lt;/slot&gt;</div><div>&lt;span style=&quot;color:#ccc&quot;&gt;</div><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">父组件中没有命名为subtitle的插槽，因此这里直接使用默认参数</span></div><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco; background-color: rgb(255, 250, 165);-evernote-highlight:true;">The Subtitle</span></div><div>&lt;slot name=&quot;subtitle&quot;&gt;The Subtitle&lt;/slot&gt;</div><div>&lt;/span&gt;</div><div>&lt;/div&gt;</div></div><div>插槽可以用于轮播图</div><hr/><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">使用动态组件</span></div><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">使用component标签声明，该标签被Vue识别</span></div><div><font style="font-family: Monaco; color: rgb(51, 51, 51);"><span style="font-size: 12px; background-color: rgb(255, 250, 165);-evernote-highlight:true;">使用is属性作为选择器，值为字符串，每个字符串对应一个components属性中声明的组件</span></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>功能：通过点击按钮选择组件</div><div>&lt;button <span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">@click=&quot;selectedComponent = 'app-quote'</span>&quot;&gt;Quote&lt;/button&gt;</div><div>&lt;button <span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">@click=&quot;selectedComponent = 'app-author'</span>&quot;&gt;Author&lt;/button&gt;</div><div>&lt;button <span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">@click=&quot;selectedComponent = 'app-new'</span>&quot;&gt;New&lt;/button&gt;</div><div>&lt;hr&gt;</div><div>&lt;p&gt;{{ selectedComponent }}&lt;/p&gt;</div><div>&lt;div class=&quot;col-xs-12&quot;&gt;</div><div>&lt;!-- 通过子组件中插入HTML代码</div><div>可以将这些代码传过去，子组件通过slot插槽直接使用 --&gt;</div><div>&lt;!-- &lt;app-quote&gt;</div><div>slot标签不是HTML原生的，被Vue所识别</div><div>&lt;h2 slot=&quot;title&quot;&gt;{{ quoteTitle }}&lt;/h2&gt;</div><div>&lt;p slot=&quot;content&quot;&gt;A wonderful Quote&lt;/p&gt;</div><div>&lt;/app-quote&gt; --&gt;</div><div>&lt;!-- 动态组件 --&gt;</div><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">&lt;component :is=&quot;selectedComponent&quot;&gt;</span></div><div>&lt;p&gt;Default Content&lt;/p&gt;</div><div>&lt;/component&gt;</div><div>&lt;/div&gt;</div><div><br/></div><div>import Quote from './components/Quote.vue'</div><div>import Author from './components/Author.vue'</div><div>import New from './components/New.vue'</div><div>export default {</div><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">components:{</span></div><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">'app-quote':Quote,</span></div><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">'app-author':Author,</span></div><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">'app-new':New</span></div><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">},</span></div></div><div><img src="day13_files/Image.png" type="image/png" data-filename="Image.png"/></div><hr/><div>对于上面使用按钮在不同组件之间进行转换，对于其中一个组件来说，<span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">当选择这个组件后，再选择其他组件，这个组件已经被销毁了</span>；当再次选择这个组件时，是重新创建这个组件，而不是使用的之前创建的这个组件<br/></div><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">使用keep-alive标签保证组件不被销毁，避免重新加载组件造成时间消耗</span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>&lt;keep-alive&gt;</div><div>&lt;component :is=&quot;selectedComponent&quot;&gt;</div><div>&lt;p&gt;Default Content&lt;/p&gt;</div><div>&lt;/component&gt;</div><div>&lt;/keep-alive&gt;</div></div><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">动态组件生命周期钩子：</span></div><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">由于使用了keep-alive保证了动态组件不被销毁，则要使用activated和deactivated两种状态来表明用户选择（激活）了该组件和用户离开（失活）了该组件</span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>export default {</div><div>data(){</div><div>return {</div><div>counter:0</div><div>};</div><div>},</div><div>destroyed(){</div><div>console.log('Destryoed!');</div><div>},</div><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">deactivated()</span>{</div><div>console.log('Deactivated');</div><div>},</div><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">activated()</span>{</div><div>console.log('Activated');</div><div>}</div><div>}</div></div><div><br/></div></div></span>
</div></body></html> 