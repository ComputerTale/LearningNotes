<html>
<head>
  <title>第四天：spring中JdbcTemplate以及Spring事务控制</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/601535 (zh-CN, DDL); Windows/10.0.0 (Win64); EDAMVersion=V2;"/>
  <meta name="content-class" content="yinxiang.markdown"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="1514"/>
<h1>第四天：spring中JdbcTemplate以及Spring事务控制</h1>

<div><span><div style="font-size: 14px; margin: 0; padding: 0; width: 100%;"><h4 style="line-height: 160%; box-sizing: content-box; font-size: 20px; color: #333;">spring中的JdbcTemplate</h4>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">持久层总图</strong><br/>
<img src="第四天：spring中JdbcTemplate以及Spring事务控制_files/持久层总图.jpg" type="image/jpeg" data-filename="持久层总图.jpg"/></p>
<h5 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 16px; color: #333;">配置数据源</h5>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">C3P0数据源<br/>
<img src="第四天：spring中JdbcTemplate以及Spring事务控制_files/Image.png" type="image/png" data-filename="Image.png"/><br/>
DBCP数据源<br/>
<img src="第四天：spring中JdbcTemplate以及Spring事务控制_files/Image [1].png" type="image/png" data-filename="Image.png"/><br/>
spring内置数据源<br/>
<img src="第四天：spring中JdbcTemplate以及Spring事务控制_files/Image [2].png" type="image/png" data-filename="Image.png"/><br/>
引入外部配置文件<br/>
<img src="第四天：spring中JdbcTemplate以及Spring事务控制_files/Image [3].png" type="image/png" data-filename="Image.png"/></p>
<h5 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 16px; color: #333;">JdbcTemplate的概述</h5>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><img src="第四天：spring中JdbcTemplate以及Spring事务控制_files/Image [4].png" type="image/png" data-filename="Image.png"/></p>
<h5 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 16px; color: #333;">JdbcTemplate的作用</h5>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">用于和数据库交互，实现对表的CRUD（create、retrieve读取、update、delete）操作</p>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;">JdbcTemplate template = context.getBean(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;jdbcTemplate&quot;</span>,JdbcTemplate.class);
template.execute(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;insert into account(name,money) values('ccc',1000)&quot;</span>);
<span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">//        保存</span>
template.update(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;insert into account(name,money) values (?,?)&quot;</span>,<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;eee&quot;</span>,<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">333f</span>);
<span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">//        更新</span>
template.update(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;update account set name =?,money=? where id=?&quot;</span>,<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;test&quot;</span>,<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">4567</span>,<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">7</span>);
<span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">//        删除</span>
template.update(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;delete from account where id=?&quot;</span>,<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">8</span>);
<span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">//        查询所有</span>
<span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">//        List&lt;Account&gt; accounts = template.query(&quot;select * from account where money&gt;?&quot;,new AccountRowMapper(),1000f);</span>
<span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">//        List&lt;Account&gt; accounts = template.query(&quot;select * from account where money&gt;?&quot;,new BeanPropertyRowMapper&lt;Account&gt;(Account.class),500f);</span>
<span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">//        for(Account account:accounts){</span>
<span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">//            System.out.println(account);</span>
<span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">//        }</span>
<span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">//        查询一个</span>
List&lt;Account&gt; accounts = template.query(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;select * from account where id=?&quot;</span>,<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">new</span> AccountRowMapper(),<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">6</span>);
System.out.println(accounts.isEmpty()?<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;没有内容&quot;</span>:accounts.get(<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">0</span>));
<span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">//查询返回一行一列（使用聚合函数，但不加group by子句）</span>
<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">int</span> count = template.queryForObject(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;select count(*) from account where money&gt;?&quot;</span>,Integer.class,<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">500f</span>);
System.out.println(count);
</code></pre>
<h5 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 16px; color: #333;">JdbcDaoSupport的使用</h5>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">使用原因：</strong><br/>
对于之前的dao实现类编写方式，如果有多个dao实现类，每个类都要new一个jdbc封装类对象（例如JdbcTempalte），然后通过对象调用类的方法进行数据的CRUD操作，比较繁琐<br/>
<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">解决方法：</strong><br/>
定义一个父类，在父类中new一个jdbc封装类对象，然后让dao实现类去继承该类<br/>
<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">spring提供了该父类，也就是JdbcDaoSupport</strong><br/>
<img src="第四天：spring中JdbcTemplate以及Spring事务控制_files/Image [5].png" type="image/png" data-filename="Image.png"/><br/>
<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">两种方式的区别</strong><br/>
<img src="第四天：spring中JdbcTemplate以及Spring事务控制_files/Image [6].png" type="image/png" data-filename="Image.png"/></p>
<hr style="line-height: 160%; box-sizing: content-box; border-top: 1px solid #eee; margin: 16px 0;"/>
<h4 style="line-height: 160%; box-sizing: content-box; font-size: 20px; color: #333;">spring基于AOP的声明式事务控制</h4>
<h5 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 16px; color: #333;">spring关于事务控制的说明</h5>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><img src="第四天：spring中JdbcTemplate以及Spring事务控制_files/Image [7].png" type="image/png" data-filename="Image.png"/><br/>
<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">spring中引入事务的步骤</strong><br/>
1、添加pom坐标</p>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;">&lt;dependency&gt;
    &lt;groupId&gt;org.springframework&lt;/groupId&gt;
    &lt;artifactId&gt;spring-tx&lt;/artifactId&gt;
    &lt;version&gt;5.1.6.RELEASE&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">2、导入xml约束</p>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
       xmlns:context=&quot;http://www.springframework.org/schema/context&quot;
       xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot;
       xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;
       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/context
        http://www.springframework.org/schema/context/spring-context.xsd
        http://www.springframework.org/schema/tx
        http://www.springframework.org/schema/tx/spring-tx.xsd
        http://www.springframework.org/schema/aop
        http://www.springframework.org/schema/aop/spring-aop.xsd&quot;&gt;
</code></pre>
<h5 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 16px; color: #333;">基于XML的事务控制（推荐）</h5>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;"><span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">&lt;!-- spring中基于XML的声明式事务控制配置步骤
    1、配置事务管理器
    2、配置事务的通知
        导入事务约束，tx名称空间和约束，同时也需要aop的
        使用tx:advice标签配置事务通知
            属性：
                id;事务唯一标识
                transaction-manager：给事务通知提供一个事务管理器引用
    3、配置AOP中的通用切入点表达式
    4、建立事务通知和切入点表达式的关系
    5、配置事务的属性
        在事务通知tx:advice标签的内部
--&gt;</span>
<span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">&lt;!-- 配置事务管理器--&gt;</span>
<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">bean</span> <span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">id</span>=<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;transactionManager&quot;</span> <span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">class</span>=<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;</span>&gt;</span>
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">property</span> <span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">name</span>=<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;dataSource&quot;</span> <span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">ref</span>=<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;dataSource&quot;</span>/&gt;</span>
<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">bean</span>&gt;</span>
<span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">&lt;!-- 配置事务的通知--&gt;</span>
<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">tx:advice</span> <span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">id</span>=<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;txAdvice&quot;</span> <span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">transaction-manager</span>=<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;transactionManager&quot;</span>&gt;</span>
    <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">&lt;!-- 配置事务的属性
                name：要添加事务的切入点（方法）
                isolation：事务的隔离级别。默认值是DEFAULT，表示使用数据库的默认隔离级别
                propagation：事务的传播行为。默认值是REQUIRED，表示一定会有事务，增删改查的选择。查询方法可以选择SUPPORTS。
                read-only：事务是否只读。只有查询方法才能设置为true。默认值是false，表示读写。
                timeout：事务的超时时间，默认值是-1，表示永不超时。如果指定值，以秒为单位。
                rollback-for：用于指定一个异常，当产生该异常时，事务回滚，产生其他异常时，事务不回滚。没有默认值，表示任何异常都回滚。
                no-roolback-for：用于指定一个异常，当产生该异常时，事务不回滚，产生其他异常时，事务回滚。没有默认值，表示任何异常都回滚。
                --&gt;</span>
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">tx:attributes</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">tx:method</span> <span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">name</span>=<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;*&quot;</span> <span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">propagation</span>=<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;REQUIRED&quot;</span> <span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">read-only</span>=<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;false&quot;</span>/&gt;</span>
        <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">&lt;!-- 上面name属性值为全通配，下面name属性值为部分通配，下面的优先级高于上面，可以匹配查询语句，但是查询语句必须以find开头--&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">tx:method</span> <span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">name</span>=<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;find*&quot;</span> <span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">propagation</span>=<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;SUPPORTS&quot;</span> <span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">read-only</span>=<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;true&quot;</span>/&gt;</span>
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">tx:attributes</span>&gt;</span>
<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">tx:advice</span>&gt;</span>
<span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">&lt;!-- 配置AOP--&gt;</span>
<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">aop:config</span>&gt;</span>
    <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">&lt;!-- 配置切入点表达式--&gt;</span>
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">aop:pointcut</span> <span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">id</span>=<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;pt1&quot;</span> <span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">expression</span>=<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;execution(* com.itheima.service.impl.*.*(..))&quot;</span>/&gt;</span>
    <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">&lt;!-- 建立切入点表达式和事务通知的关系--&gt;</span>
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">aop:advisor</span> <span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">advice-ref</span>=<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;txAdvice&quot;</span> <span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">pointcut-ref</span>=<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;pt1&quot;</span>/&gt;</span>
<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">aop:config</span>&gt;</span>
</code></pre>
<h5 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 16px; color: #333;">基于注解的事务控制</h5>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;">&lt;!-- spring中基于注解的声明式事务控制配置步骤
    1、配置事务管理器
    2、开启spring对注解事务的支持
    3、再需要事务支持的地方使用@Transactional注解
--&gt;
&lt;!-- 配置事务管理器--&gt;
&lt;bean &gt;
    &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;/&gt;
&lt;/bean&gt;
&lt;!-- 开启spring对注解事务的支持--&gt;
&lt;tx:annotation-driven transaction-manager=&quot;transactionManager&quot;/&gt;
</code></pre>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><img src="第四天：spring中JdbcTemplate以及Spring事务控制_files/Image [8].png" type="image/png" data-filename="Image.png"/><br/>
<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">说明</strong><br/>
从对比可以看出，使用注解方式配置事务控制在XML配置上省去很多，但是在注解配置上，却更加复杂，因为XML配置通知时可以使用通配符来匹配，既保证有针对性的选择切入点，有可以匹配多个切入点，使配置更简单</p>
<h4 style="line-height: 160%; box-sizing: content-box; font-size: 20px; color: #333;">基于纯注解的事务控制</h4>
<h5 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 16px; color: #333;">步骤</h5>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">1、编写配置类</strong><br/>
主配置类<br/>
<img src="第四天：spring中JdbcTemplate以及Spring事务控制_files/Image [9].png" type="image/png" data-filename="Image.png"/><br/>
子配置类：数据库配置类，提供jdbcTemplate<br/>
<img src="第四天：spring中JdbcTemplate以及Spring事务控制_files/Image [10].png" type="image/png" data-filename="Image.png"/><br/>
子配置类：事务控制类，初始化transactionManager对象<br/>
<img src="第四天：spring中JdbcTemplate以及Spring事务控制_files/Image [11].png" type="image/png" data-filename="Image.png"/><br/>
<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">2、编写dao持久层，使用jdbcTemplate，提供持久层dao对象</strong><br/>
<img src="第四天：spring中JdbcTemplate以及Spring事务控制_files/Image [12].png" type="image/png" data-filename="Image.png"/><br/>
<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">3、编写service业务层，使用持久层dao对象，同时引入事务控制，提供业务层service对象</strong><br/>
<img src="第四天：spring中JdbcTemplate以及Spring事务控制_files/Image [13].png" type="image/png" data-filename="Image.png"/><br/>
<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">4、编写测试类，导入配置，使用service对象</strong><br/>
<img src="第四天：spring中JdbcTemplate以及Spring事务控制_files/Image [14].png" type="image/png" data-filename="Image.png"/></p>
<h4 style="line-height: 160%; box-sizing: content-box; font-size: 20px; color: #333;">spring中基于编程式事务控制</h4>
<h5 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 16px; color: #333;">步骤</h5>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">1、编写XML配置文件</strong></p>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;">&lt;!-- 配置事务管理器--&gt;
&lt;bean &gt;
    &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;/&gt;
&lt;/bean&gt;
&lt;!-- 引入事务模板对象，由spring提供--&gt;
&lt;bean &gt;
&lt;/bean&gt;
</code></pre>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">2、业务层使用事务模板对象进行事务控制</strong><br/>
<img src="第四天：spring中JdbcTemplate以及Spring事务控制_files/Image [15].png" type="image/png" data-filename="Image.png"/></p>
<h5 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 16px; color: #333;">这种方式的缺陷</h5>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">业务层中每个业务方法都需要使用事务模板对象来进行处理，这会造成大量的重复代码，和spring引入AOP初衷不符</p>
<hr style="line-height: 160%; box-sizing: content-box; border-top: 1px solid #eee; margin: 16px 0;"/>
<h4 style="line-height: 160%; box-sizing: content-box; font-size: 20px; color: #333;">spring5的新特性</h4>
<h5 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 16px; color: #333;">支持的jdk版本&gt;=1.8</h5>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><img src="第四天：spring中JdbcTemplate以及Spring事务控制_files/Image [16].png" type="image/png" data-filename="Image.png"/></p>
<h5 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 16px; color: #333;">jdk1.7与1.8在创建对象上用时的比较</h5>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><img src="第四天：spring中JdbcTemplate以及Spring事务控制_files/Image [17].png" type="image/png" data-filename="Image.png"/></p>
<h5 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 16px; color: #333;">其他方面</h5>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><img src="第四天：spring中JdbcTemplate以及Spring事务控制_files/Image [18].png" type="image/png" data-filename="Image.png"/></p>
<h5 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 16px; color: #333;">核心容器的更新</h5>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><img src="第四天：spring中JdbcTemplate以及Spring事务控制_files/Image [19].png" type="image/png" data-filename="Image.png"/></p>
<h5 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 16px; color: #333;">JetBrains Kotlin语言支持</h5>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><img src="第四天：spring中JdbcTemplate以及Spring事务控制_files/Image [20].png" type="image/png" data-filename="Image.png"/></p>
<h5 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 16px; color: #333;">响应式编程风格</h5>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><img src="第四天：spring中JdbcTemplate以及Spring事务控制_files/Image [21].png" type="image/png" data-filename="Image.png"/></p>
<h5 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 16px; color: #333;">Junit5支持</h5>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><img src="第四天：spring中JdbcTemplate以及Spring事务控制_files/Image [22].png" type="image/png" data-filename="Image.png"/></p>
</div><center style="display:none !important;visibility:collapse !important;height:0 !important;white-space:nowrap;width:100%;overflow:hidden">%23%23%23%23%20spring%E4%B8%AD%E7%9A%84JdbcTemplate%0A**%E6%8C%81%E4%B9%85%E5%B1%82%E6%80%BB%E5%9B%BE**%0A!%5Bfd87d60bc84120aaf6f81b09052453a6.jpeg%5D(en-resource%3A%2F%2Fdatabase%2F4446%3A1)%0A%23%23%23%23%23%20%E9%85%8D%E7%BD%AE%E6%95%B0%E6%8D%AE%E6%BA%90%0AC3P0%E6%95%B0%E6%8D%AE%E6%BA%90%0A!%5B7d90885921d473ee7204477f85c8e564.png%5D(en-resource%3A%2F%2Fdatabase%2F4458%3A1)%0ADBCP%E6%95%B0%E6%8D%AE%E6%BA%90%0A!%5B1996d555b0e1b7db7b9203b5a73ef0dd.png%5D(en-resource%3A%2F%2Fdatabase%2F4460%3A1)%0Aspring%E5%86%85%E7%BD%AE%E6%95%B0%E6%8D%AE%E6%BA%90%0A!%5Bb5309f4d3395b2b2663bf9e6b9a1bf41.png%5D(en-resource%3A%2F%2Fdatabase%2F4462%3A1)%0A%E5%BC%95%E5%85%A5%E5%A4%96%E9%83%A8%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%0A!%5B3815400d4faf264dc6d309f27bf486f9.png%5D(en-resource%3A%2F%2Fdatabase%2F4464%3A1)%0A%23%23%23%23%23%20JdbcTemplate%E7%9A%84%E6%A6%82%E8%BF%B0%0A!%5Ba6695f5738e31315bf8d1139b6410e3f.png%5D(en-resource%3A%2F%2Fdatabase%2F4450%3A1)%0A%23%23%23%23%23%20JdbcTemplate%E7%9A%84%E4%BD%9C%E7%94%A8%0A%E7%94%A8%E4%BA%8E%E5%92%8C%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BA%A4%E4%BA%92%EF%BC%8C%E5%AE%9E%E7%8E%B0%E5%AF%B9%E8%A1%A8%E7%9A%84CRUD%EF%BC%88create%E3%80%81retrieve%E8%AF%BB%E5%8F%96%E3%80%81update%E3%80%81delete%EF%BC%89%E6%93%8D%E4%BD%9C%0A%60%60%60java%0AJdbcTemplate%20template%20%3D%20context.getBean(%22jdbcTemplate%22%2CJdbcTemplate.class)%3B%0Atemplate.execute(%22insert%20into%20account(name%2Cmoney)%20values('ccc'%2C1000)%22)%3B%0A%2F%2F%20%20%20%20%20%20%20%20%E4%BF%9D%E5%AD%98%0Atemplate.update(%22insert%20into%20account(name%2Cmoney)%20values%20(%3F%2C%3F)%22%2C%22eee%22%2C333f)%3B%0A%2F%2F%20%20%20%20%20%20%20%20%E6%9B%B4%E6%96%B0%0Atemplate.update(%22update%20account%20set%20name%20%3D%3F%2Cmoney%3D%3F%20where%20id%3D%3F%22%2C%22test%22%2C4567%2C7)%3B%0A%2F%2F%20%20%20%20%20%20%20%20%E5%88%A0%E9%99%A4%0Atemplate.update(%22delete%20from%20account%20where%20id%3D%3F%22%2C8)%3B%0A%2F%2F%20%20%20%20%20%20%20%20%E6%9F%A5%E8%AF%A2%E6%89%80%E6%9C%89%0A%2F%2F%20%20%20%20%20%20%20%20List%3CAccount%3E%20accounts%20%3D%20template.query(%22select%20*%20from%20account%20where%20money%3E%3F%22%2Cnew%20AccountRowMapper()%2C1000f)%3B%0A%2F%2F%20%20%20%20%20%20%20%20List%3CAccount%3E%20accounts%20%3D%20template.query(%22select%20*%20from%20account%20where%20money%3E%3F%22%2Cnew%20BeanPropertyRowMapper%3CAccount%3E(Account.class)%2C500f)%3B%0A%2F%2F%20%20%20%20%20%20%20%20for(Account%20account%3Aaccounts)%7B%0A%2F%2F%20%20%20%20%20%20%20%20%20%20%20%20System.out.println(account)%3B%0A%2F%2F%20%20%20%20%20%20%20%20%7D%0A%2F%2F%20%20%20%20%20%20%20%20%E6%9F%A5%E8%AF%A2%E4%B8%80%E4%B8%AA%0AList%3CAccount%3E%20accounts%20%3D%20template.query(%22select%20*%20from%20account%20where%20id%3D%3F%22%2Cnew%20AccountRowMapper()%2C6)%3B%0ASystem.out.println(accounts.isEmpty()%3F%22%E6%B2%A1%E6%9C%89%E5%86%85%E5%AE%B9%22%3Aaccounts.get(0))%3B%0A%2F%2F%E6%9F%A5%E8%AF%A2%E8%BF%94%E5%9B%9E%E4%B8%80%E8%A1%8C%E4%B8%80%E5%88%97%EF%BC%88%E4%BD%BF%E7%94%A8%E8%81%9A%E5%90%88%E5%87%BD%E6%95%B0%EF%BC%8C%E4%BD%86%E4%B8%8D%E5%8A%A0group%20by%E5%AD%90%E5%8F%A5%EF%BC%89%0Aint%20count%20%3D%20template.queryForObject(%22select%20count(*)%20from%20account%20where%20money%3E%3F%22%2CInteger.class%2C500f)%3B%0ASystem.out.println(count)%3B%0A%60%60%60%0A%23%23%23%23%23%20JdbcDaoSupport%E7%9A%84%E4%BD%BF%E7%94%A8%0A**%E4%BD%BF%E7%94%A8%E5%8E%9F%E5%9B%A0%EF%BC%9A**%0A%E5%AF%B9%E4%BA%8E%E4%B9%8B%E5%89%8D%E7%9A%84dao%E5%AE%9E%E7%8E%B0%E7%B1%BB%E7%BC%96%E5%86%99%E6%96%B9%E5%BC%8F%EF%BC%8C%E5%A6%82%E6%9E%9C%E6%9C%89%E5%A4%9A%E4%B8%AAdao%E5%AE%9E%E7%8E%B0%E7%B1%BB%EF%BC%8C%E6%AF%8F%E4%B8%AA%E7%B1%BB%E9%83%BD%E8%A6%81new%E4%B8%80%E4%B8%AAjdbc%E5%B0%81%E8%A3%85%E7%B1%BB%E5%AF%B9%E8%B1%A1%EF%BC%88%E4%BE%8B%E5%A6%82JdbcTempalte%EF%BC%89%EF%BC%8C%E7%84%B6%E5%90%8E%E9%80%9A%E8%BF%87%E5%AF%B9%E8%B1%A1%E8%B0%83%E7%94%A8%E7%B1%BB%E7%9A%84%E6%96%B9%E6%B3%95%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E7%9A%84CRUD%E6%93%8D%E4%BD%9C%EF%BC%8C%E6%AF%94%E8%BE%83%E7%B9%81%E7%90%90%0A**%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95%EF%BC%9A**%0A%E5%AE%9A%E4%B9%89%E4%B8%80%E4%B8%AA%E7%88%B6%E7%B1%BB%EF%BC%8C%E5%9C%A8%E7%88%B6%E7%B1%BB%E4%B8%ADnew%E4%B8%80%E4%B8%AAjdbc%E5%B0%81%E8%A3%85%E7%B1%BB%E5%AF%B9%E8%B1%A1%EF%BC%8C%E7%84%B6%E5%90%8E%E8%AE%A9dao%E5%AE%9E%E7%8E%B0%E7%B1%BB%E5%8E%BB%E7%BB%A7%E6%89%BF%E8%AF%A5%E7%B1%BB%0A**spring%E6%8F%90%E4%BE%9B%E4%BA%86%E8%AF%A5%E7%88%B6%E7%B1%BB%EF%BC%8C%E4%B9%9F%E5%B0%B1%E6%98%AFJdbcDaoSupport**%0A!%5Bb5422ed696821d47f75a9c43cf7bee71.png%5D(en-resource%3A%2F%2Fdatabase%2F4466%3A1)%0A**%E4%B8%A4%E7%A7%8D%E6%96%B9%E5%BC%8F%E7%9A%84%E5%8C%BA%E5%88%AB**%0A!%5B319e034796e596fe9ac4997e251333aa.png%5D(en-resource%3A%2F%2Fdatabase%2F4468%3A1)%0A%0A*%20*%20*%0A%0A%23%23%23%23%20spring%E5%9F%BA%E4%BA%8EAOP%E7%9A%84%E5%A3%B0%E6%98%8E%E5%BC%8F%E4%BA%8B%E5%8A%A1%E6%8E%A7%E5%88%B6%0A%23%23%23%23%23%20spring%E5%85%B3%E4%BA%8E%E4%BA%8B%E5%8A%A1%E6%8E%A7%E5%88%B6%E7%9A%84%E8%AF%B4%E6%98%8E%0A!%5B0df24e6b993d26ae6c95b47153350366.png%5D(en-resource%3A%2F%2Fdatabase%2F4558%3A1)%0A**spring%E4%B8%AD%E5%BC%95%E5%85%A5%E4%BA%8B%E5%8A%A1%E7%9A%84%E6%AD%A5%E9%AA%A4**%0A1%E3%80%81%E6%B7%BB%E5%8A%A0pom%E5%9D%90%E6%A0%87%0A%60%60%60%0A%3Cdependency%3E%0A%20%20%20%20%3CgroupId%3Eorg.springframework%3C%2FgroupId%3E%0A%20%20%20%20%3CartifactId%3Espring-tx%3C%2FartifactId%3E%0A%20%20%20%20%3Cversion%3E5.1.6.RELEASE%3C%2Fversion%3E%0A%3C%2Fdependency%3E%0A%60%60%60%0A2%E3%80%81%E5%AF%BC%E5%85%A5xml%E7%BA%A6%E6%9D%9F%0A%60%60%60%0A%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%3F%3E%0A%3Cbeans%20xmlns%3D%22http%3A%2F%2Fwww.springframework.org%2Fschema%2Fbeans%22%0A%20%20%20%20%20%20%20xmlns%3Axsi%3D%22http%3A%2F%2Fwww.w3.org%2F2001%2FXMLSchema-instance%22%0A%20%20%20%20%20%20%20xmlns%3Acontext%3D%22http%3A%2F%2Fwww.springframework.org%2Fschema%2Fcontext%22%0A%20%20%20%20%20%20%20xmlns%3Atx%3D%22http%3A%2F%2Fwww.springframework.org%2Fschema%2Ftx%22%0A%20%20%20%20%20%20%20xmlns%3Aaop%3D%22http%3A%2F%2Fwww.springframework.org%2Fschema%2Faop%22%0A%20%20%20%20%20%20%20xsi%3AschemaLocation%3D%22http%3A%2F%2Fwww.springframework.org%2Fschema%2Fbeans%0A%20%20%20%20%20%20%20%20http%3A%2F%2Fwww.springframework.org%2Fschema%2Fbeans%2Fspring-beans.xsd%0A%20%20%20%20%20%20%20%20http%3A%2F%2Fwww.springframework.org%2Fschema%2Fcontext%0A%20%20%20%20%20%20%20%20http%3A%2F%2Fwww.springframework.org%2Fschema%2Fcontext%2Fspring-context.xsd%0A%20%20%20%20%20%20%20%20http%3A%2F%2Fwww.springframework.org%2Fschema%2Ftx%0A%20%20%20%20%20%20%20%20http%3A%2F%2Fwww.springframework.org%2Fschema%2Ftx%2Fspring-tx.xsd%0A%20%20%20%20%20%20%20%20http%3A%2F%2Fwww.springframework.org%2Fschema%2Faop%0A%20%20%20%20%20%20%20%20http%3A%2F%2Fwww.springframework.org%2Fschema%2Faop%2Fspring-aop.xsd%22%3E%0A%60%60%60%0A%23%23%23%23%23%20%E5%9F%BA%E4%BA%8EXML%E7%9A%84%E4%BA%8B%E5%8A%A1%E6%8E%A7%E5%88%B6%EF%BC%88%E6%8E%A8%E8%8D%90%EF%BC%89%0A%60%60%60XML%0A%3C!--%20spring%E4%B8%AD%E5%9F%BA%E4%BA%8EXML%E7%9A%84%E5%A3%B0%E6%98%8E%E5%BC%8F%E4%BA%8B%E5%8A%A1%E6%8E%A7%E5%88%B6%E9%85%8D%E7%BD%AE%E6%AD%A5%E9%AA%A4%0A%20%20%20%201%E3%80%81%E9%85%8D%E7%BD%AE%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86%E5%99%A8%0A%20%20%20%202%E3%80%81%E9%85%8D%E7%BD%AE%E4%BA%8B%E5%8A%A1%E7%9A%84%E9%80%9A%E7%9F%A5%0A%20%20%20%20%20%20%20%20%E5%AF%BC%E5%85%A5%E4%BA%8B%E5%8A%A1%E7%BA%A6%E6%9D%9F%EF%BC%8Ctx%E5%90%8D%E7%A7%B0%E7%A9%BA%E9%97%B4%E5%92%8C%E7%BA%A6%E6%9D%9F%EF%BC%8C%E5%90%8C%E6%97%B6%E4%B9%9F%E9%9C%80%E8%A6%81aop%E7%9A%84%0A%20%20%20%20%20%20%20%20%E4%BD%BF%E7%94%A8tx%3Aadvice%E6%A0%87%E7%AD%BE%E9%85%8D%E7%BD%AE%E4%BA%8B%E5%8A%A1%E9%80%9A%E7%9F%A5%0A%20%20%20%20%20%20%20%20%20%20%20%20%E5%B1%9E%E6%80%A7%EF%BC%9A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20id%3B%E4%BA%8B%E5%8A%A1%E5%94%AF%E4%B8%80%E6%A0%87%E8%AF%86%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20transaction-manager%EF%BC%9A%E7%BB%99%E4%BA%8B%E5%8A%A1%E9%80%9A%E7%9F%A5%E6%8F%90%E4%BE%9B%E4%B8%80%E4%B8%AA%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86%E5%99%A8%E5%BC%95%E7%94%A8%0A%20%20%20%203%E3%80%81%E9%85%8D%E7%BD%AEAOP%E4%B8%AD%E7%9A%84%E9%80%9A%E7%94%A8%E5%88%87%E5%85%A5%E7%82%B9%E8%A1%A8%E8%BE%BE%E5%BC%8F%0A%20%20%20%204%E3%80%81%E5%BB%BA%E7%AB%8B%E4%BA%8B%E5%8A%A1%E9%80%9A%E7%9F%A5%E5%92%8C%E5%88%87%E5%85%A5%E7%82%B9%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%9A%84%E5%85%B3%E7%B3%BB%0A%20%20%20%205%E3%80%81%E9%85%8D%E7%BD%AE%E4%BA%8B%E5%8A%A1%E7%9A%84%E5%B1%9E%E6%80%A7%0A%20%20%20%20%20%20%20%20%E5%9C%A8%E4%BA%8B%E5%8A%A1%E9%80%9A%E7%9F%A5tx%3Aadvice%E6%A0%87%E7%AD%BE%E7%9A%84%E5%86%85%E9%83%A8%0A--%3E%0A%3C!--%20%E9%85%8D%E7%BD%AE%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86%E5%99%A8--%3E%0A%3Cbean%20id%3D%22transactionManager%22%20class%3D%22org.springframework.jdbc.datasource.DataSourceTransactionManager%22%3E%0A%20%20%20%20%3Cproperty%20name%3D%22dataSource%22%20ref%3D%22dataSource%22%2F%3E%0A%3C%2Fbean%3E%0A%3C!--%20%E9%85%8D%E7%BD%AE%E4%BA%8B%E5%8A%A1%E7%9A%84%E9%80%9A%E7%9F%A5--%3E%0A%3Ctx%3Aadvice%20id%3D%22txAdvice%22%20transaction-manager%3D%22transactionManager%22%3E%0A%20%20%20%20%3C!--%20%E9%85%8D%E7%BD%AE%E4%BA%8B%E5%8A%A1%E7%9A%84%E5%B1%9E%E6%80%A7%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20name%EF%BC%9A%E8%A6%81%E6%B7%BB%E5%8A%A0%E4%BA%8B%E5%8A%A1%E7%9A%84%E5%88%87%E5%85%A5%E7%82%B9%EF%BC%88%E6%96%B9%E6%B3%95%EF%BC%89%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20isolation%EF%BC%9A%E4%BA%8B%E5%8A%A1%E7%9A%84%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB%E3%80%82%E9%BB%98%E8%AE%A4%E5%80%BC%E6%98%AFDEFAULT%EF%BC%8C%E8%A1%A8%E7%A4%BA%E4%BD%BF%E7%94%A8%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E9%BB%98%E8%AE%A4%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20propagation%EF%BC%9A%E4%BA%8B%E5%8A%A1%E7%9A%84%E4%BC%A0%E6%92%AD%E8%A1%8C%E4%B8%BA%E3%80%82%E9%BB%98%E8%AE%A4%E5%80%BC%E6%98%AFREQUIRED%EF%BC%8C%E8%A1%A8%E7%A4%BA%E4%B8%80%E5%AE%9A%E4%BC%9A%E6%9C%89%E4%BA%8B%E5%8A%A1%EF%BC%8C%E5%A2%9E%E5%88%A0%E6%94%B9%E6%9F%A5%E7%9A%84%E9%80%89%E6%8B%A9%E3%80%82%E6%9F%A5%E8%AF%A2%E6%96%B9%E6%B3%95%E5%8F%AF%E4%BB%A5%E9%80%89%E6%8B%A9SUPPORTS%E3%80%82%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20read-only%EF%BC%9A%E4%BA%8B%E5%8A%A1%E6%98%AF%E5%90%A6%E5%8F%AA%E8%AF%BB%E3%80%82%E5%8F%AA%E6%9C%89%E6%9F%A5%E8%AF%A2%E6%96%B9%E6%B3%95%E6%89%8D%E8%83%BD%E8%AE%BE%E7%BD%AE%E4%B8%BAtrue%E3%80%82%E9%BB%98%E8%AE%A4%E5%80%BC%E6%98%AFfalse%EF%BC%8C%E8%A1%A8%E7%A4%BA%E8%AF%BB%E5%86%99%E3%80%82%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20timeout%EF%BC%9A%E4%BA%8B%E5%8A%A1%E7%9A%84%E8%B6%85%E6%97%B6%E6%97%B6%E9%97%B4%EF%BC%8C%E9%BB%98%E8%AE%A4%E5%80%BC%E6%98%AF-1%EF%BC%8C%E8%A1%A8%E7%A4%BA%E6%B0%B8%E4%B8%8D%E8%B6%85%E6%97%B6%E3%80%82%E5%A6%82%E6%9E%9C%E6%8C%87%E5%AE%9A%E5%80%BC%EF%BC%8C%E4%BB%A5%E7%A7%92%E4%B8%BA%E5%8D%95%E4%BD%8D%E3%80%82%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20rollback-for%EF%BC%9A%E7%94%A8%E4%BA%8E%E6%8C%87%E5%AE%9A%E4%B8%80%E4%B8%AA%E5%BC%82%E5%B8%B8%EF%BC%8C%E5%BD%93%E4%BA%A7%E7%94%9F%E8%AF%A5%E5%BC%82%E5%B8%B8%E6%97%B6%EF%BC%8C%E4%BA%8B%E5%8A%A1%E5%9B%9E%E6%BB%9A%EF%BC%8C%E4%BA%A7%E7%94%9F%E5%85%B6%E4%BB%96%E5%BC%82%E5%B8%B8%E6%97%B6%EF%BC%8C%E4%BA%8B%E5%8A%A1%E4%B8%8D%E5%9B%9E%E6%BB%9A%E3%80%82%E6%B2%A1%E6%9C%89%E9%BB%98%E8%AE%A4%E5%80%BC%EF%BC%8C%E8%A1%A8%E7%A4%BA%E4%BB%BB%E4%BD%95%E5%BC%82%E5%B8%B8%E9%83%BD%E5%9B%9E%E6%BB%9A%E3%80%82%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20no-roolback-for%EF%BC%9A%E7%94%A8%E4%BA%8E%E6%8C%87%E5%AE%9A%E4%B8%80%E4%B8%AA%E5%BC%82%E5%B8%B8%EF%BC%8C%E5%BD%93%E4%BA%A7%E7%94%9F%E8%AF%A5%E5%BC%82%E5%B8%B8%E6%97%B6%EF%BC%8C%E4%BA%8B%E5%8A%A1%E4%B8%8D%E5%9B%9E%E6%BB%9A%EF%BC%8C%E4%BA%A7%E7%94%9F%E5%85%B6%E4%BB%96%E5%BC%82%E5%B8%B8%E6%97%B6%EF%BC%8C%E4%BA%8B%E5%8A%A1%E5%9B%9E%E6%BB%9A%E3%80%82%E6%B2%A1%E6%9C%89%E9%BB%98%E8%AE%A4%E5%80%BC%EF%BC%8C%E8%A1%A8%E7%A4%BA%E4%BB%BB%E4%BD%95%E5%BC%82%E5%B8%B8%E9%83%BD%E5%9B%9E%E6%BB%9A%E3%80%82%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20--%3E%0A%20%20%20%20%3Ctx%3Aattributes%3E%0A%20%20%20%20%20%20%20%20%3Ctx%3Amethod%20name%3D%22*%22%20propagation%3D%22REQUIRED%22%20read-only%3D%22false%22%2F%3E%0A%20%20%20%20%20%20%20%20%3C!--%20%E4%B8%8A%E9%9D%A2name%E5%B1%9E%E6%80%A7%E5%80%BC%E4%B8%BA%E5%85%A8%E9%80%9A%E9%85%8D%EF%BC%8C%E4%B8%8B%E9%9D%A2name%E5%B1%9E%E6%80%A7%E5%80%BC%E4%B8%BA%E9%83%A8%E5%88%86%E9%80%9A%E9%85%8D%EF%BC%8C%E4%B8%8B%E9%9D%A2%E7%9A%84%E4%BC%98%E5%85%88%E7%BA%A7%E9%AB%98%E4%BA%8E%E4%B8%8A%E9%9D%A2%EF%BC%8C%E5%8F%AF%E4%BB%A5%E5%8C%B9%E9%85%8D%E6%9F%A5%E8%AF%A2%E8%AF%AD%E5%8F%A5%EF%BC%8C%E4%BD%86%E6%98%AF%E6%9F%A5%E8%AF%A2%E8%AF%AD%E5%8F%A5%E5%BF%85%E9%A1%BB%E4%BB%A5find%E5%BC%80%E5%A4%B4--%3E%0A%20%20%20%20%20%20%20%20%3Ctx%3Amethod%20name%3D%22find*%22%20propagation%3D%22SUPPORTS%22%20read-only%3D%22true%22%2F%3E%0A%20%20%20%20%3C%2Ftx%3Aattributes%3E%0A%3C%2Ftx%3Aadvice%3E%0A%3C!--%20%E9%85%8D%E7%BD%AEAOP--%3E%0A%3Caop%3Aconfig%3E%0A%20%20%20%20%3C!--%20%E9%85%8D%E7%BD%AE%E5%88%87%E5%85%A5%E7%82%B9%E8%A1%A8%E8%BE%BE%E5%BC%8F--%3E%0A%20%20%20%20%3Caop%3Apointcut%20id%3D%22pt1%22%20expression%3D%22execution(*%20com.itheima.service.impl.*.*(..))%22%2F%3E%0A%20%20%20%20%3C!--%20%E5%BB%BA%E7%AB%8B%E5%88%87%E5%85%A5%E7%82%B9%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%92%8C%E4%BA%8B%E5%8A%A1%E9%80%9A%E7%9F%A5%E7%9A%84%E5%85%B3%E7%B3%BB--%3E%0A%20%20%20%20%3Caop%3Aadvisor%20advice-ref%3D%22txAdvice%22%20pointcut-ref%3D%22pt1%22%2F%3E%0A%3C%2Faop%3Aconfig%3E%0A%60%60%60%0A%23%23%23%23%23%20%E5%9F%BA%E4%BA%8E%E6%B3%A8%E8%A7%A3%E7%9A%84%E4%BA%8B%E5%8A%A1%E6%8E%A7%E5%88%B6%0A%60%60%60%0A%3C!--%20spring%E4%B8%AD%E5%9F%BA%E4%BA%8E%E6%B3%A8%E8%A7%A3%E7%9A%84%E5%A3%B0%E6%98%8E%E5%BC%8F%E4%BA%8B%E5%8A%A1%E6%8E%A7%E5%88%B6%E9%85%8D%E7%BD%AE%E6%AD%A5%E9%AA%A4%0A%20%20%20%201%E3%80%81%E9%85%8D%E7%BD%AE%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86%E5%99%A8%0A%20%20%20%202%E3%80%81%E5%BC%80%E5%90%AFspring%E5%AF%B9%E6%B3%A8%E8%A7%A3%E4%BA%8B%E5%8A%A1%E7%9A%84%E6%94%AF%E6%8C%81%0A%20%20%20%203%E3%80%81%E5%86%8D%E9%9C%80%E8%A6%81%E4%BA%8B%E5%8A%A1%E6%94%AF%E6%8C%81%E7%9A%84%E5%9C%B0%E6%96%B9%E4%BD%BF%E7%94%A8%40Transactional%E6%B3%A8%E8%A7%A3%0A--%3E%0A%3C!--%20%E9%85%8D%E7%BD%AE%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86%E5%99%A8--%3E%0A%3Cbean%20id%3D%22transactionManager%22%20class%3D%22org.springframework.jdbc.datasource.DataSourceTransactionManager%22%3E%0A%20%20%20%20%3Cproperty%20name%3D%22dataSource%22%20ref%3D%22dataSource%22%2F%3E%0A%3C%2Fbean%3E%0A%3C!--%20%E5%BC%80%E5%90%AFspring%E5%AF%B9%E6%B3%A8%E8%A7%A3%E4%BA%8B%E5%8A%A1%E7%9A%84%E6%94%AF%E6%8C%81--%3E%0A%3Ctx%3Aannotation-driven%20transaction-manager%3D%22transactionManager%22%2F%3E%0A%60%60%60%0A!%5B88aba8811ea7a1fa0abdf13bd998e277.png%5D(en-resource%3A%2F%2Fdatabase%2F4562%3A1)%0A**%E8%AF%B4%E6%98%8E**%0A%E4%BB%8E%E5%AF%B9%E6%AF%94%E5%8F%AF%E4%BB%A5%E7%9C%8B%E5%87%BA%EF%BC%8C%E4%BD%BF%E7%94%A8%E6%B3%A8%E8%A7%A3%E6%96%B9%E5%BC%8F%E9%85%8D%E7%BD%AE%E4%BA%8B%E5%8A%A1%E6%8E%A7%E5%88%B6%E5%9C%A8XML%E9%85%8D%E7%BD%AE%E4%B8%8A%E7%9C%81%E5%8E%BB%E5%BE%88%E5%A4%9A%EF%BC%8C%E4%BD%86%E6%98%AF%E5%9C%A8%E6%B3%A8%E8%A7%A3%E9%85%8D%E7%BD%AE%E4%B8%8A%EF%BC%8C%E5%8D%B4%E6%9B%B4%E5%8A%A0%E5%A4%8D%E6%9D%82%EF%BC%8C%E5%9B%A0%E4%B8%BAXML%E9%85%8D%E7%BD%AE%E9%80%9A%E7%9F%A5%E6%97%B6%E5%8F%AF%E4%BB%A5%E4%BD%BF%E7%94%A8%E9%80%9A%E9%85%8D%E7%AC%A6%E6%9D%A5%E5%8C%B9%E9%85%8D%EF%BC%8C%E6%97%A2%E4%BF%9D%E8%AF%81%E6%9C%89%E9%92%88%E5%AF%B9%E6%80%A7%E7%9A%84%E9%80%89%E6%8B%A9%E5%88%87%E5%85%A5%E7%82%B9%EF%BC%8C%E6%9C%89%E5%8F%AF%E4%BB%A5%E5%8C%B9%E9%85%8D%E5%A4%9A%E4%B8%AA%E5%88%87%E5%85%A5%E7%82%B9%EF%BC%8C%E4%BD%BF%E9%85%8D%E7%BD%AE%E6%9B%B4%E7%AE%80%E5%8D%95%0A%23%23%23%23%20%E5%9F%BA%E4%BA%8E%E7%BA%AF%E6%B3%A8%E8%A7%A3%E7%9A%84%E4%BA%8B%E5%8A%A1%E6%8E%A7%E5%88%B6%0A%23%23%23%23%23%20%E6%AD%A5%E9%AA%A4%0A**1%E3%80%81%E7%BC%96%E5%86%99%E9%85%8D%E7%BD%AE%E7%B1%BB**%0A%E4%B8%BB%E9%85%8D%E7%BD%AE%E7%B1%BB%0A!%5Ba4ae31c9a629975d853999b3e84bd4da.png%5D(en-resource%3A%2F%2Fdatabase%2F4566%3A0)%0A%E5%AD%90%E9%85%8D%E7%BD%AE%E7%B1%BB%EF%BC%9A%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE%E7%B1%BB%EF%BC%8C%E6%8F%90%E4%BE%9BjdbcTemplate%0A!%5Bb22d0b21fe68166753fb7abacc64362c.png%5D(en-resource%3A%2F%2Fdatabase%2F4568%3A0)%0A%E5%AD%90%E9%85%8D%E7%BD%AE%E7%B1%BB%EF%BC%9A%E4%BA%8B%E5%8A%A1%E6%8E%A7%E5%88%B6%E7%B1%BB%EF%BC%8C%E5%88%9D%E5%A7%8B%E5%8C%96transactionManager%E5%AF%B9%E8%B1%A1%0A!%5B8229203e350cf31e8c272980d050cb2f.png%5D(en-resource%3A%2F%2Fdatabase%2F4570%3A0)%0A**2%E3%80%81%E7%BC%96%E5%86%99dao%E6%8C%81%E4%B9%85%E5%B1%82%EF%BC%8C%E4%BD%BF%E7%94%A8jdbcTemplate%EF%BC%8C%E6%8F%90%E4%BE%9B%E6%8C%81%E4%B9%85%E5%B1%82dao%E5%AF%B9%E8%B1%A1**%0A!%5B9efe57b8b9c9260123c482a21719d52a.png%5D(en-resource%3A%2F%2Fdatabase%2F4572%3A0)%0A**3%E3%80%81%E7%BC%96%E5%86%99service%E4%B8%9A%E5%8A%A1%E5%B1%82%EF%BC%8C%E4%BD%BF%E7%94%A8%E6%8C%81%E4%B9%85%E5%B1%82dao%E5%AF%B9%E8%B1%A1%EF%BC%8C%E5%90%8C%E6%97%B6%E5%BC%95%E5%85%A5%E4%BA%8B%E5%8A%A1%E6%8E%A7%E5%88%B6%EF%BC%8C%E6%8F%90%E4%BE%9B%E4%B8%9A%E5%8A%A1%E5%B1%82service%E5%AF%B9%E8%B1%A1**%0A!%5B3dab2047755ed405a07a0c7f86e38d19.png%5D(en-resource%3A%2F%2Fdatabase%2F4574%3A0)%0A**4%E3%80%81%E7%BC%96%E5%86%99%E6%B5%8B%E8%AF%95%E7%B1%BB%EF%BC%8C%E5%AF%BC%E5%85%A5%E9%85%8D%E7%BD%AE%EF%BC%8C%E4%BD%BF%E7%94%A8service%E5%AF%B9%E8%B1%A1**%0A!%5B81f816f2f89195944e754ca65accc37b.png%5D(en-resource%3A%2F%2Fdatabase%2F4576%3A0)%0A%23%23%23%23%20spring%E4%B8%AD%E5%9F%BA%E4%BA%8E%E7%BC%96%E7%A8%8B%E5%BC%8F%E4%BA%8B%E5%8A%A1%E6%8E%A7%E5%88%B6%0A%23%23%23%23%23%20%E6%AD%A5%E9%AA%A4%0A**1%E3%80%81%E7%BC%96%E5%86%99XML%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6**%0A%60%60%60%0A%3C!--%20%E9%85%8D%E7%BD%AE%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86%E5%99%A8--%3E%0A%3Cbean%20id%3D%22transactionManager%22%20class%3D%22org.springframework.jdbc.datasource.DataSourceTransactionManager%22%3E%0A%20%20%20%20%3Cproperty%20name%3D%22dataSource%22%20ref%3D%22dataSource%22%2F%3E%0A%3C%2Fbean%3E%0A%3C!--%20%E5%BC%95%E5%85%A5%E4%BA%8B%E5%8A%A1%E6%A8%A1%E6%9D%BF%E5%AF%B9%E8%B1%A1%EF%BC%8C%E7%94%B1spring%E6%8F%90%E4%BE%9B--%3E%0A%3Cbean%20id%3D%22transactionTemplate%22%20class%3D%22org.springframework.transaction.support.TransactionTemplate%22%3E%0A%3C%2Fbean%3E%0A%60%60%60%0A**2%E3%80%81%E4%B8%9A%E5%8A%A1%E5%B1%82%E4%BD%BF%E7%94%A8%E4%BA%8B%E5%8A%A1%E6%A8%A1%E6%9D%BF%E5%AF%B9%E8%B1%A1%E8%BF%9B%E8%A1%8C%E4%BA%8B%E5%8A%A1%E6%8E%A7%E5%88%B6**%0A!%5Be91864037bf7d0262e1111a6558f1577.png%5D(en-resource%3A%2F%2Fdatabase%2F4578%3A0)%0A%23%23%23%23%23%20%E8%BF%99%E7%A7%8D%E6%96%B9%E5%BC%8F%E7%9A%84%E7%BC%BA%E9%99%B7%0A%E4%B8%9A%E5%8A%A1%E5%B1%82%E4%B8%AD%E6%AF%8F%E4%B8%AA%E4%B8%9A%E5%8A%A1%E6%96%B9%E6%B3%95%E9%83%BD%E9%9C%80%E8%A6%81%E4%BD%BF%E7%94%A8%E4%BA%8B%E5%8A%A1%E6%A8%A1%E6%9D%BF%E5%AF%B9%E8%B1%A1%E6%9D%A5%E8%BF%9B%E8%A1%8C%E5%A4%84%E7%90%86%EF%BC%8C%E8%BF%99%E4%BC%9A%E9%80%A0%E6%88%90%E5%A4%A7%E9%87%8F%E7%9A%84%E9%87%8D%E5%A4%8D%E4%BB%A3%E7%A0%81%EF%BC%8C%E5%92%8Cspring%E5%BC%95%E5%85%A5AOP%E5%88%9D%E8%A1%B7%E4%B8%8D%E7%AC%A6%0A%0A*%20*%20*%0A%23%23%23%23%20spring5%E7%9A%84%E6%96%B0%E7%89%B9%E6%80%A7%0A%23%23%23%23%23%20%E6%94%AF%E6%8C%81%E7%9A%84jdk%E7%89%88%E6%9C%AC%3E%3D1.8%0A!%5Bfc004f74b825ecffa2d581be27f41282.png%5D(en-resource%3A%2F%2Fdatabase%2F4580%3A0)%0A%23%23%23%23%23%20jdk1.7%E4%B8%8E1.8%E5%9C%A8%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1%E4%B8%8A%E7%94%A8%E6%97%B6%E7%9A%84%E6%AF%94%E8%BE%83%0A!%5B00c511f0e9a1447c85319f8481d7ea4b.png%5D(en-resource%3A%2F%2Fdatabase%2F4582%3A0)%0A%23%23%23%23%23%20%E5%85%B6%E4%BB%96%E6%96%B9%E9%9D%A2%0A!%5B12a89d5c9e1d32179ae8b44ddf17be97.png%5D(en-resource%3A%2F%2Fdatabase%2F4584%3A0)%0A%23%23%23%23%23%20%E6%A0%B8%E5%BF%83%E5%AE%B9%E5%99%A8%E7%9A%84%E6%9B%B4%E6%96%B0%0A!%5Bbf24d963ffaa24c15bedeff17bf34289.png%5D(en-resource%3A%2F%2Fdatabase%2F4586%3A0)%0A%23%23%23%23%23%20JetBrains%20Kotlin%E8%AF%AD%E8%A8%80%E6%94%AF%E6%8C%81%0A!%5B428be75953be21101271e24f455dbe7e.png%5D(en-resource%3A%2F%2Fdatabase%2F4588%3A0)%0A%23%23%23%23%23%20%E5%93%8D%E5%BA%94%E5%BC%8F%E7%BC%96%E7%A8%8B%E9%A3%8E%E6%A0%BC%0A!%5B3d207ea10cc047612b7e3a2fefd87a1a.png%5D(en-resource%3A%2F%2Fdatabase%2F4590%3A0)%0A%23%23%23%23%23%20Junit5%E6%94%AF%E6%8C%81%0A!%5B49d3bfd86b06d22f98beb036e05ee2be.png%5D(en-resource%3A%2F%2Fdatabase%2F4592%3A0)%0A%0A%0A%0A%0A%0A%0A%0A</center></span>
</div></body></html> 