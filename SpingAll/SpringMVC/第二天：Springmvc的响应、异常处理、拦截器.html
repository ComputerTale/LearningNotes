<html>
<head>
  <title>第二天：Springmvc的响应、异常处理、拦截器</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/601535 (zh-CN, DDL); Windows/10.0.0 (Win64); EDAMVersion=V2;"/>
  <meta name="content-class" content="yinxiang.markdown"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="960"/>
<h1>第二天：Springmvc的响应、异常处理、拦截器</h1>

<div><span><div style="font-size: 14px; margin: 0; padding: 0; width: 100%;"><h4 style="line-height: 160%; box-sizing: content-box; font-size: 20px; color: #333;">响应数据和结果视图</h4>
<h5 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 16px; color: #333;">返回值是字符串</h5>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">视图解析器根据该字符串（逻辑视图名）解析生成物理视图地址<br/>
<img src="第二天：Springmvc的响应、异常处理、拦截器_files/Image.png" type="image/png" data-filename="Image.png"/></p>
<h5 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 16px; color: #333;">无返回值，即void方法</h5>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">springmvc通过方法名来作为默认返回值<br/>
<img src="第二天：Springmvc的响应、异常处理、拦截器_files/Image [1].png" type="image/png" data-filename="Image.png"/></p>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">通过调用Servlet原生API来直接来指定返回的结果（绕过视图解析器，路径为物理视图地址）</strong><br/>
<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">注意由于绕过视图解析器，所以只能使用void方法，不返回视图</strong><br/>
注意：通过response进行重定向访问不到WEB-INF目录下面的页面，页面只能放在根目录下<br/>
后端处理：<br/>
<img src="第二天：Springmvc的响应、异常处理、拦截器_files/Image [2].png" type="image/png" data-filename="Image.png"/><br/>
前端调用：<br/>
<img src="第二天：Springmvc的响应、异常处理、拦截器_files/Image [3].png" type="image/png" data-filename="Image.png"/><br/>
<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">SpringMVC也提供另一种转发和重定向的方式：String类型返回数据中添加关键字（也绕过了视图解析器，即需要写物理视图地址）</strong></p>
<ol style="line-height: 160%; box-sizing: content-box; display: block; padding-left: 30px; margin: 6px 0 10px; color: #333; list-style-type: decimal;">
<li style="line-height: 160%; box-sizing: content-box;">forward转发<br/>
<img src="第二天：Springmvc的响应、异常处理、拦截器_files/Image [4].png" type="image/png" data-filename="Image.png"/></li>
<li style="line-height: 160%; box-sizing: content-box;">Redirect重定向<br/>
<img src="第二天：Springmvc的响应、异常处理、拦截器_files/Image [5].png" type="image/png" data-filename="Image.png"/></li>
</ol>
<h5 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 16px; color: #333;">返回值是ModelAndView对象（SpringMVC提供）</h5>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">直接设置返回值和视图<br/>
<img src="第二天：Springmvc的响应、异常处理、拦截器_files/Image [6].png" type="image/png" data-filename="Image.png"/></p>
<hr style="line-height: 160%; box-sizing: content-box; border-top: 1px solid #eee; margin: 16px 0;"/>
<h5 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 16px; color: #333;">ResponseBody注解响应json数据</h5>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">自定义实现json响应</strong><br/>
<img src="第二天：Springmvc的响应、异常处理、拦截器_files/Image [7].png" type="image/png" data-filename="Image.png"/><br/>
<img src="第二天：Springmvc的响应、异常处理、拦截器_files/Image [8].png" type="image/png" data-filename="Image.png"/></p>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">使用ResponseBody实现响应</strong><br/>
前端</p>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;"><span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">html</span>&gt;</span>
<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">head</span>&gt;</span>
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">title</span>&gt;</span>Title<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">title</span>&gt;</span>
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">script</span> <span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">type</span>=<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;text/javascript&quot;</span> <span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">src</span>=<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;${pageContext.request.contextPath}/js/jquery-3.4.1.min.js&quot;</span>&gt;</span><span style="line-height: 160%; box-sizing: content-box;"></span><span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">script</span>&gt;</span>
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">script</span> <span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">type</span>=<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;text/javascript&quot;</span>&gt;</span><span style="line-height: 160%; box-sizing: content-box;">
        <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">//异步加载</span>
        $(<span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">function</span> (<span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;"></span>) </span>{
            $(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;#testJson&quot;</span>).click(<span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">function</span> (<span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;"></span>) </span>{
                $.ajax({
                    <span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">type</span>:<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;post&quot;</span>, 
                    <span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">url</span>:<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;${pageContext.request.contextPath}/testResponseJson&quot;</span>,
                    <span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">contentType</span>:<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;application/json;charset=UTF-8&quot;</span>,
                    <span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">data</span>:<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">'{&quot;id&quot;:1,&quot;name&quot;:&quot;test&quot;,&quot;money&quot;:999}'</span>,
                    <span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">dataType</span>:<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;json&quot;</span>,
                    <span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">success</span>:<span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">function</span> (<span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">data</span>) </span>{
                        alert(data)
                        alert(data.name)
                    }
                });
            });
        });
    </span><span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">script</span>&gt;</span>
<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">head</span>&gt;</span>
<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">body</span>&gt;</span>
    <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">&lt;!-- 测试异步请求 --&gt;</span>
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">input</span> <span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">type</span>=<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;button&quot;</span> <span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">value</span>=<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot; 测试 ajax 请求 json 和响应 json&quot;</span> <span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">id</span>=<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;testJson&quot;</span>/&gt;</span>
<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">body</span>&gt;</span>
<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">html</span>&gt;</span>
</code></pre>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">后端：将json数据封装到JavaBean中</p>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;"><span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">@RequestMapping</span>(value = <span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;/testResponseJson&quot;</span>)
<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">public</span> <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">@ResponseBody</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">Account <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">testResponseJson</span><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">(@RequestBody Account account)</span></span>{
    System.out.println(account);
    account.setName(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;jj&quot;</span>);
    <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">return</span> account;
}
</code></pre>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">POM坐标：导入jackson包</p>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;">Spring5.0以上需要jackson包2.7以上
<span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">&lt;!-- 解析json数据--&gt;</span>
<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependency</span>&gt;</span>
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>com.fasterxml.jackson.core<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>jackson-databind<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">version</span>&gt;</span>2.9.6<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">version</span>&gt;</span>
<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependency</span>&gt;</span>
<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependency</span>&gt;</span>
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>com.fasterxml.jackson.core<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>jackson-core<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">version</span>&gt;</span>2.9.6<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">version</span>&gt;</span>
<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependency</span>&gt;</span>
<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependency</span>&gt;</span>
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>com.fasterxml.jackson.core<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>jackson-annotations<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">version</span>&gt;</span>2.9.6<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">version</span>&gt;</span>
<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependency</span>&gt;</span>
</code></pre>
<hr style="line-height: 160%; box-sizing: content-box; border-top: 1px solid #eee; margin: 16px 0;"/>
<h4 style="line-height: 160%; box-sizing: content-box; font-size: 20px; color: #333;">SpringMVC实现文件上传</h4>
<h5 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 16px; color: #333;">文件上传的必要前提</h5>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><img src="第二天：Springmvc的响应、异常处理、拦截器_files/Image [9].png" type="image/png" data-filename="Image.png"/></p>
<h5 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 16px; color: #333;">文件上传原理</h5>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><img src="第二天：Springmvc的响应、异常处理、拦截器_files/Image [10].png" type="image/png" data-filename="Image.png"/></p>
<h5 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 16px; color: #333;">导入文件上传相关jar包</h5>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;">&lt;dependency&gt;
    &lt;groupId&gt;commons-fileupload&lt;/groupId&gt;
    &lt;artifactId&gt;commons-fileupload&lt;/artifactId&gt;
    &lt;version&gt;1.4&lt;/version&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
    &lt;groupId&gt;commons-io&lt;/groupId&gt;
    &lt;artifactId&gt;commons-io&lt;/artifactId&gt;
    &lt;version&gt;2.6&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
<h5 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 16px; color: #333;">在springmvc中配置导入文件上传解析器</h5>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;"><span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">&lt;!-- 配置文件上传解析器，id必须是multipartResolver--&gt;</span>
<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">bean</span> <span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">id</span>=<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;multipartResolver&quot;</span> <span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">class</span>=<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;org.springframework.web.multipart.commons.CommonsMultipartResolver&quot;</span>&gt;</span>
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">property</span> <span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">name</span>=<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;maxUploadSize&quot;</span> <span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">value</span>=<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;5242880&quot;</span>/&gt;</span>
<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">bean</span>&gt;</span>
</code></pre>
<h5 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 16px; color: #333;">在Handler中编写逻辑代码</h5>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">传统方式</p>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;"><span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">@RequestMapping</span>(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;/testFileUpload&quot;</span>)
<span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">public</span> String <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">testFileUpload</span><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">(HttpServletRequest request)</span></span>{
    <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">//1.判断表单是否支持文件上传</span>
    <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">boolean</span> isMultiForm = ServletFileUpload.isMultipartContent(request);
    <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">if</span>(!isMultiForm){
        <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">return</span> <span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;error&quot;</span>;
    }
    <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">//2.创建DiskFileItemFactory对象</span>
    DiskFileItemFactory factory = <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">new</span> DiskFileItemFactory();
<span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">//设置缓存文件的目录</span>
<span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">//commons-fileupload是使用缓存的</span>
<span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">//原则：</span>
<span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">//大小是否超过10kb</span>
<span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">//超过：使用临时文件作为缓存</span>
<span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">//不超过：使用内存作为缓存</span>
    factory.setRepository(<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">new</span> File(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;D://temp&quot;</span>));
    <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">//3.创建ServletFileUpload对象</span>
    ServletFileUpload sfu = <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">new</span> ServletFileUpload(factory);
    <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">//4.解析request，得到FileItem对象的集合</span>
    List&lt;FileItem&gt; items = sfu.parseRequest(request);
    <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">//5.判断FileItem是否是文件字段</span>
    <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">for</span>(FileItem item:items){
        <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">if</span>(item.isFormField()){
            <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">//6.不是</span>
            String fieldName = item.getFieldName();
            String fieldValue = item.getString(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;UTF-8&quot;</span>);
        }<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">else</span>{
            <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">//7.是，写文件</span>
            <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">//获取文件的保存路径</span>
            String basePath = reqeust.getServletContext.getRealPath(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;WEB-INF/uploads&quot;</span>);
            File file = <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">new</span> File(basePath);
            <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">if</span>(!file.exists(){
                file.mkdirs();
            }
            <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">//获取文件名</span>
            String fileName = item.getName();
            String uudi = UUID.randomUUID().toString().replace(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;-&quot;</span>,<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;&quot;</span>).toUpperCase();
            fileName = uuid+<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;_&quot;</span>+fileName;
            item.write(<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">new</span> File(file,fileName));
            <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">//删除临时文件</span>
            item.delete();
        }
    }
    <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">//6.是：写文件</span>
    <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">//7.不是：打印输出</span>
    <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">//8.释放流</span>
}
</code></pre>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">SpringMVC提供的方式<br/>
封装了FileItem</p>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;"><span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">@RequestMapping</span>(value = <span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;/testFileUpload&quot;</span>)
<span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">public</span> String <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">testFileUpload</span><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">(HttpServletRequest request, MultipartFile uploadFile)</span> </span>{
    <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">//存入文件的文件名</span>
    String filename = <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">null</span>;
    <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">//1.获取上传文件的文件名</span>
    String uploadFilename = uploadFile.getOriginalFilename();
    <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">//2.截取文件扩展名</span>
    String extentName = uploadFilename.substring(uploadFilename.indexOf(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;.&quot;</span>) + <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">1</span>, uploadFilename.length());
    <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">//3.把文件加上随机数，防止文件重复</span>
    String uuid = UUID.randomUUID().toString().replace(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;-&quot;</span>, <span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;&quot;</span>).toUpperCase();
    filename = uuid + <span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;.&quot;</span> + extentName;
    System.out.println(filename);
    <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">//4.获取文件路径</span>
    String path = request.getSession().getServletContext().getRealPath(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;/uploads/&quot;</span>);
    System.out.println(path);
    <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">//5.判断路径是否存在</span>
    File file = <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">new</span> File(path);
    <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">if</span> (!file.exists()) {
        file.mkdirs();
    }
    <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">//6.使用MultipartFile接口将文件写入指定位置</span>
    <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">try</span> {
        uploadFile.transferTo(<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">new</span> File(file, filename));
    } <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">catch</span> (IOException e) {
        System.out.println(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;上传失败&quot;</span>);
    }
    <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">return</span> <span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;success&quot;</span>;
}
</code></pre>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">文件保存位置<br/>
<img src="第二天：Springmvc的响应、异常处理、拦截器_files/Image [11].png" type="image/png" data-filename="Image.png"/></p>
<h4 style="line-height: 160%; box-sizing: content-box; font-size: 20px; color: #333;">SpringMVC实现跨服务器文件上传</h4>
<h5 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 16px; color: #333;">分服务器的目的</h5>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><img src="第二天：Springmvc的响应、异常处理、拦截器_files/Image [12].png" type="image/png" data-filename="Image.png"/></p>
<h5 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 16px; color: #333;">开发步骤</h5>
<h5 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 16px; color: #333;">配置Tomcat服务器</h5>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">tomcat服务器默认是禁止上传文件的，因此要修改tomcat服务器的web.xml配置文件<br/>
不修改会报错：报错信息405/403 　<br/>
<img src="第二天：Springmvc的响应、异常处理、拦截器_files/Image [13].png" type="image/png" data-filename="Image.png"/></p>
<h5 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 16px; color: #333;">配置文件上传服务器</h5>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">Tomcat服务器</strong><br/>
<img src="第二天：Springmvc的响应、异常处理、拦截器_files/Image [14].png" type="image/png" data-filename="Image.png"/><br/>
<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">POM坐标</strong></p>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;"><span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependency</span>&gt;</span>
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>com.sun.jersey<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>jersey-core<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">version</span>&gt;</span>1.19.4<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">version</span>&gt;</span>
<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependency</span>&gt;</span>
<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependency</span>&gt;</span>
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>com.sun.jersey<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>jersey-client<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">version</span>&gt;</span>1.19.4<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">version</span>&gt;</span>
<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependency</span>&gt;</span>
</code></pre>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">界面</strong><br/>
<img src="第二天：Springmvc的响应、异常处理、拦截器_files/Image [15].png" type="image/png" data-filename="Image.png"/><br/>
<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">Controller</strong></p>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;"><span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">@Controller</span>(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;fileUploadController1&quot;</span>)
<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">@RequestMapping</span>(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;/springmvc&quot;</span>)
<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">public</span> <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">class</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">FileController1</span> </span>{
    <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">//用于指定图片服务器的地址，在实际开发中，可以写到配置文件中</span>
    <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">private</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">static</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">final</span> String IMAGESERVERPATH = <span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;http://localhost:9090/day02_eesy_03resourcesserver_war/uploads/&quot;</span>;

    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">@RequestMapping</span>(value = <span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;/testFileUpload1&quot;</span>)
    <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">public</span> String <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">testFileUpload</span><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">(HttpServletRequest request, MultipartFile uploadFile)</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">throws</span> IOException </span>{
        <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">//存入文件的文件名</span>
        String filename = <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">null</span>;
        <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">//1.获取上传文件的文件名</span>
        String uploadFilename = uploadFile.getOriginalFilename();
        <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">//2.截取文件扩展名</span>
        String extentName = uploadFilename.substring(uploadFilename.indexOf(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;.&quot;</span>) + <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">1</span>, uploadFilename.length());
        <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">//3.把文件加上随机数，防止文件重复</span>
        String uuid = UUID.randomUUID().toString().replace(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;-&quot;</span>, <span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;&quot;</span>).toUpperCase();
        filename = uuid + <span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;.&quot;</span> + extentName;

        <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">//4.获取jersey的jar包中提供的Client对象</span>
        Client client = Client.create();
        <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">//5.建立和图片服务器的连接</span>
        WebResource resource = client.resource(IMAGESERVERPATH + filename);
        <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">//6.把文件写到远程服务器</span>
        String result = resource.put(String.class,uploadFile.getBytes());
        System.out.println(result);
        <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">return</span> <span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;success&quot;</span>;
    }
}
</code></pre>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">springmvc.xml的配置</strong></p>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;"><span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">&lt;!-- 配置文件上传解析器，id必须是multipartResolver--&gt;</span>
<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">bean</span> <span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">id</span>=<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;multipartResolver&quot;</span> <span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">class</span>=<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;org.springframework.web.multipart.commons.CommonsMultipartResolver&quot;</span>&gt;</span>
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">property</span> <span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">name</span>=<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;maxUploadSize&quot;</span> <span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">value</span>=<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;5242880&quot;</span>/&gt;</span>
<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">bean</span>&gt;</span>
</code></pre>
<h5 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 16px; color: #333;">图片文件服务器</h5>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">Tomcat服务器</strong><br/>
<img src="第二天：Springmvc的响应、异常处理、拦截器_files/Image [16].png" type="image/png" data-filename="Image.png"/><br/>
<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">新建一个webapp应用部署到该服务器</strong><br/>
<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">在Tomcat部署后的文件夹下面新建一个uploads文件夹</strong><br/>
没有该文件夹会报错：409<br/>
<img src="第二天：Springmvc的响应、异常处理、拦截器_files/Image [17].png" type="image/png" data-filename="Image.png"/></p>
<hr style="line-height: 160%; box-sizing: content-box; border-top: 1px solid #eee; margin: 16px 0;"/>
<h4 style="line-height: 160%; box-sizing: content-box; font-size: 20px; color: #333;">SpringMVC中的异常处理</h4>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">异常分为：<br/>
预期异常和运行时异常RuntimeException<br/>
前者通过捕获异常从而获取异常信息，后者主要通过规范代码开发、测试手段减少异常的发生<br/>
<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">spring框架的异常处理逻辑</strong><br/>
<img src="第二天：Springmvc的响应、异常处理、拦截器_files/Image [18].png" type="image/png" data-filename="Image.png"/></p>
<h5 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 16px; color: #333;">自定义异常处理</h5>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">自定义异常类：</p>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">public</span> <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">class</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">CustomException</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">extends</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">Exception</span> </span>{
    <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">//定义异常信息</span>
    <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">private</span> String message;
    <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">/**
     * 通过构造函数获取异常信息
     *
     * <span style="color: #608b4e; line-height: 160%; box-sizing: content-box;">@param</span> message
     */</span>
    <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">public</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">CustomException</span><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">(String message)</span> </span>{
        <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">this</span>.message = message;
    }
    <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">//获取异常信息</span>
    <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">public</span> String <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">getMessage</span><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">()</span> </span>{
        <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">return</span> message;
    }
    <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">public</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">void</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">setMessage</span><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">(String message)</span> </span>{
        <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">this</span>.message = message;
    }
}
</code></pre>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">自定义异常处理类：</p>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">public</span> <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">class</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">CustomExceptionResolver</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">implements</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">HandlerExceptionResolver</span> </span>{
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">@Override</span>
    <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">public</span> ModelAndView <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">resolveException</span><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse, Object o, Exception e)</span> </span>{
        <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">//打印异常信息</span>
        e.printStackTrace();
        <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">//定义一个自己的异常类对象</span>
        CustomException customException = <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">null</span>;
        <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">//判断当前传入的异常对象是否是自定义异常对象</span>
        <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">if</span>(e <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">instanceof</span> CustomException){
            customException = (CustomException) e;
        }<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">else</span>{
            customException = <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">new</span> CustomException(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;系统问题，请联系系统管理员&quot;</span>);
        }
        ModelAndView mv = <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">new</span> ModelAndView();
        mv.setViewName(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;error&quot;</span>);
        mv.addObject(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;errorMessage&quot;</span>,customException.getMessage());
        <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">return</span> mv;
    }
}
</code></pre>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">在springmvc中配置自定义异常处理类<br/>
使用@ControllerAdvice注解代替</p>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;"><span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">&lt;!-- 配置自定义异常处理器 --&gt;</span>
<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">bean</span> <span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">id</span>=<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;handlerExceptionResolver&quot;</span>
      <span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">class</span>=<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;com.itheima.web.exception.CustomExceptionResolver&quot;</span>/&gt;</span>
</code></pre>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">抛出自定义异常</p>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;"><span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">@Controller</span>(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;exceptionController&quot;</span>)
<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">@RequestMapping</span>(value = <span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;/springmvc&quot;</span>)
<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">public</span> <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">class</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">ExceptionController</span> </span>{
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">@RequestMapping</span>(value = <span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;/testException&quot;</span>)
    <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">public</span> String <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">testException</span><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">(String username)</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">throws</span> CustomException </span>{
        System.out.println(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;执行testException方法&quot;</span>);
        System.out.println(username);
        <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">//判断用户名是否为空，如果为空，则抛出异常</span>
        <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">if</span>(StringUtils.isEmpty(username)){
            <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">throw</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">new</span> CustomException(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;输入为空&quot;</span>);
        }
        <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">return</span> <span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;success&quot;</span>;
    }
}
</code></pre>
<hr style="line-height: 160%; box-sizing: content-box; border-top: 1px solid #eee; margin: 16px 0;"/>
<h4 style="line-height: 160%; box-sizing: content-box; font-size: 20px; color: #333;">SpringMVC的拦截器</h4>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">拦截器的作用</strong><br/>
<img src="第二天：Springmvc的响应、异常处理、拦截器_files/Image [19].png" type="image/png" data-filename="Image.png"/></p>
<h5 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 16px; color: #333;">自定义拦截器</h5>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">自定义拦截器</strong></p>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">public</span> <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">class</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">MyIntercepter2</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">implements</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">HandlerInterceptor</span> </span>{
    <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">/**
     * 当请求到达时，此方法先执行
     * 此方法的返回值决定是否放行
     * 返回true：放行    放行的含义：如果有下一个拦截器执行下一个，如果当前拦截器处于最后一个，则执行handler方法（控制器中方法
     * 返回false：不放行
     */</span>
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">@Override</span>
    <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">public</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">boolean</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">preHandle</span><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">throws</span> Exception </span>{
        System.out.println(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;拦截器2执行preHandle方法&quot;</span>);
        <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">return</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">true</span>;
    }
    <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">/**
     * 调用条件：
     * 在拦截器链内所有拦截器返成功调用 
     * 调用顺序：
     * Controller中handler方法之后
     * 作用：
     * 在业务处理器处理完请求后，但是 DispatcherServlet 向客户端返回响应前被调用，
     * 在该方法中对用户请求 request 进行处理。
     */</span>
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">@Override</span>
    <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">public</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">void</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">postHandle</span><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView)</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">throws</span> Exception </span>{
        System.out.println(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;拦截器2执行postHandle方法&quot;</span>);
    }
    <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">/**
     * 调用条件：
     * 只要 preHandle 返回 true 就调用
     * 调用顺序：
     * 在postHandle方法之后调用
     * 作用：
     * 在 DispatcherServlet 完全处理完请求后被调用，
     * 可以在该方法中进行一些资源清理的操作。
     */</span>
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">@Override</span>
    <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">public</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">void</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">afterCompletion</span><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex)</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">throws</span> Exception </span>{
        System.out.println(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;拦截器2执行afterCompletion方法&quot;</span>);
    }
}
</code></pre>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">springmvc中配置拦截器</strong></p>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;"><span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">&lt;!-- 配置springmvc的拦截器--&gt;</span>
<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">mvc:interceptors</span>&gt;</span>
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">mvc:interceptor</span>&gt;</span>
        <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">&lt;!-- 用于指定拦截请求映射--&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">mvc:mapping</span> <span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">path</span>=<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;/**&quot;</span>/&gt;</span>
        <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">&lt;!-- 配置拦截器--&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">bean</span> <span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">id</span>=<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;MyIntercepter1&quot;</span> <span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">class</span>=<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;com.itheima.web.intercepter.MyIntercepter1&quot;</span>/&gt;</span>
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">mvc:interceptor</span>&gt;</span>
<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">mvc:interceptors</span>&gt;</span>
</code></pre>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">执行结果</strong><br/>
<img src="第二天：Springmvc的响应、异常处理、拦截器_files/Image [20].png" type="image/png" data-filename="Image.png"/></p>
<h5 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 16px; color: #333;">自定义拦截器栈</h5>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">定义两个拦截器</strong><br/>
<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">在springmvc中配置两个拦截器</strong></p>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;"><span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">&lt;!-- 配置springmvc的拦截器--&gt;</span>
<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">mvc:interceptors</span>&gt;</span>
    <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">&lt;!-- 拦截器执行顺序与这里配置相关--&gt;</span>
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">mvc:interceptor</span>&gt;</span>
        <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">&lt;!-- 用于指定拦截请求映射--&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">mvc:mapping</span> <span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">path</span>=<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;/**&quot;</span>/&gt;</span>
        <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">&lt;!-- 配置拦截器--&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">bean</span> <span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">id</span>=<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;MyIntercepter1&quot;</span> <span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">class</span>=<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;com.itheima.web.intercepter.MyIntercepter1&quot;</span>/&gt;</span>
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">mvc:interceptor</span>&gt;</span>
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">mvc:interceptor</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">mvc:mapping</span> <span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">path</span>=<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;/**&quot;</span>/&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">bean</span> <span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">id</span>=<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;MyIntercepter2&quot;</span> <span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">class</span>=<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;com.itheima.web.intercepter.MyIntercepter2&quot;</span>/&gt;</span>
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">mvc:interceptor</span>&gt;</span>
<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">mvc:interceptors</span>&gt;</span>
</code></pre>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">执行结果</strong><br/>
<img src="第二天：Springmvc的响应、异常处理、拦截器_files/Image [21].png" type="image/png" data-filename="Image.png"/><br/>
<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">当拦截器2的preHandle方法拦截（返回false）时的结果</strong><br/>
<img src="第二天：Springmvc的响应、异常处理、拦截器_files/Image [22].png" type="image/png" data-filename="Image.png"/></p>
<h5 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 16px; color: #333;">拦截器的简单案例</h5>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">案例说明</strong><br/>
<img src="第二天：Springmvc的响应、异常处理、拦截器_files/Image [23].png" type="image/png" data-filename="Image.png"/><br/>
拦截器代码<br/>
<img src="第二天：Springmvc的响应、异常处理、拦截器_files/Image [24].png" type="image/png" data-filename="Image.png"/><br/>
控制器代码<br/>
<img src="第二天：Springmvc的响应、异常处理、拦截器_files/Image [25].png" type="image/png" data-filename="Image.png"/></p>
</div><center style="display:none !important;visibility:collapse !important;height:0 !important;white-space:nowrap;width:100%;overflow:hidden">%23%23%23%23%20%E5%93%8D%E5%BA%94%E6%95%B0%E6%8D%AE%E5%92%8C%E7%BB%93%E6%9E%9C%E8%A7%86%E5%9B%BE%20%0A%23%23%23%23%23%20%E8%BF%94%E5%9B%9E%E5%80%BC%E6%98%AF%E5%AD%97%E7%AC%A6%E4%B8%B2%0A%E8%A7%86%E5%9B%BE%E8%A7%A3%E6%9E%90%E5%99%A8%E6%A0%B9%E6%8D%AE%E8%AF%A5%E5%AD%97%E7%AC%A6%E4%B8%B2%EF%BC%88%E9%80%BB%E8%BE%91%E8%A7%86%E5%9B%BE%E5%90%8D%EF%BC%89%E8%A7%A3%E6%9E%90%E7%94%9F%E6%88%90%E7%89%A9%E7%90%86%E8%A7%86%E5%9B%BE%E5%9C%B0%E5%9D%80%0A!%5Bbea3db97070a0ac161f5b9e990fa8c7f.png%5D(en-resource%3A%2F%2Fdatabase%2F4817%3A1)%0A%23%23%23%23%23%20%E6%97%A0%E8%BF%94%E5%9B%9E%E5%80%BC%EF%BC%8C%E5%8D%B3void%E6%96%B9%E6%B3%95%0Aspringmvc%E9%80%9A%E8%BF%87%E6%96%B9%E6%B3%95%E5%90%8D%E6%9D%A5%E4%BD%9C%E4%B8%BA%E9%BB%98%E8%AE%A4%E8%BF%94%E5%9B%9E%E5%80%BC%0A!%5B610b7c5404a7ab10d6050e583b3aeb2b.png%5D(en-resource%3A%2F%2Fdatabase%2F4843%3A1)%0A%0A**%E9%80%9A%E8%BF%87%E8%B0%83%E7%94%A8Servlet%E5%8E%9F%E7%94%9FAPI%E6%9D%A5%E7%9B%B4%E6%8E%A5%E6%9D%A5%E6%8C%87%E5%AE%9A%E8%BF%94%E5%9B%9E%E7%9A%84%E7%BB%93%E6%9E%9C%EF%BC%88%E7%BB%95%E8%BF%87%E8%A7%86%E5%9B%BE%E8%A7%A3%E6%9E%90%E5%99%A8%EF%BC%8C%E8%B7%AF%E5%BE%84%E4%B8%BA%E7%89%A9%E7%90%86%E8%A7%86%E5%9B%BE%E5%9C%B0%E5%9D%80%EF%BC%89**%0A**%E6%B3%A8%E6%84%8F%E7%94%B1%E4%BA%8E%E7%BB%95%E8%BF%87%E8%A7%86%E5%9B%BE%E8%A7%A3%E6%9E%90%E5%99%A8%EF%BC%8C%E6%89%80%E4%BB%A5%E5%8F%AA%E8%83%BD%E4%BD%BF%E7%94%A8void%E6%96%B9%E6%B3%95%EF%BC%8C%E4%B8%8D%E8%BF%94%E5%9B%9E%E8%A7%86%E5%9B%BE**%0A%E6%B3%A8%E6%84%8F%EF%BC%9A%E9%80%9A%E8%BF%87response%E8%BF%9B%E8%A1%8C%E9%87%8D%E5%AE%9A%E5%90%91%E8%AE%BF%E9%97%AE%E4%B8%8D%E5%88%B0WEB-INF%E7%9B%AE%E5%BD%95%E4%B8%8B%E9%9D%A2%E7%9A%84%E9%A1%B5%E9%9D%A2%EF%BC%8C%E9%A1%B5%E9%9D%A2%E5%8F%AA%E8%83%BD%E6%94%BE%E5%9C%A8%E6%A0%B9%E7%9B%AE%E5%BD%95%E4%B8%8B%0A%E5%90%8E%E7%AB%AF%E5%A4%84%E7%90%86%EF%BC%9A%0A!%5B2630fd4817a0b4e1a7d1cf49d6b8cf0f.png%5D(en-resource%3A%2F%2Fdatabase%2F4847%3A1)%0A%E5%89%8D%E7%AB%AF%E8%B0%83%E7%94%A8%EF%BC%9A%0A!%5B8cced43cac55fb002bf07fdf5b591673.png%5D(en-resource%3A%2F%2Fdatabase%2F4849%3A1)%0A**SpringMVC%E4%B9%9F%E6%8F%90%E4%BE%9B%E5%8F%A6%E4%B8%80%E7%A7%8D%E8%BD%AC%E5%8F%91%E5%92%8C%E9%87%8D%E5%AE%9A%E5%90%91%E7%9A%84%E6%96%B9%E5%BC%8F%EF%BC%9AString%E7%B1%BB%E5%9E%8B%E8%BF%94%E5%9B%9E%E6%95%B0%E6%8D%AE%E4%B8%AD%E6%B7%BB%E5%8A%A0%E5%85%B3%E9%94%AE%E5%AD%97%EF%BC%88%E4%B9%9F%E7%BB%95%E8%BF%87%E4%BA%86%E8%A7%86%E5%9B%BE%E8%A7%A3%E6%9E%90%E5%99%A8%EF%BC%8C%E5%8D%B3%E9%9C%80%E8%A6%81%E5%86%99%E7%89%A9%E7%90%86%E8%A7%86%E5%9B%BE%E5%9C%B0%E5%9D%80%EF%BC%89**%0A1.%20%20forward%E8%BD%AC%E5%8F%91%0A!%5B39b1ac010ef04b175f01fa78105d2a23.png%5D(en-resource%3A%2F%2Fdatabase%2F4823%3A1)%0A2.%20%20Redirect%E9%87%8D%E5%AE%9A%E5%90%91%0A!%5Bf5cffbe43c2965dea0f3e14bdd347adc.png%5D(en-resource%3A%2F%2Fdatabase%2F4825%3A1)%0A%0A%23%23%23%23%23%20%E8%BF%94%E5%9B%9E%E5%80%BC%E6%98%AFModelAndView%E5%AF%B9%E8%B1%A1%EF%BC%88SpringMVC%E6%8F%90%E4%BE%9B%EF%BC%89%0A%E7%9B%B4%E6%8E%A5%E8%AE%BE%E7%BD%AE%E8%BF%94%E5%9B%9E%E5%80%BC%E5%92%8C%E8%A7%86%E5%9B%BE%0A!%5B6984d0e7b7568dee95658b06ecefba8b.png%5D(en-resource%3A%2F%2Fdatabase%2F4821%3A1)%0A%0A*%20*%20*%0A%23%23%23%23%23%20ResponseBody%E6%B3%A8%E8%A7%A3%E5%93%8D%E5%BA%94json%E6%95%B0%E6%8D%AE%0A**%E8%87%AA%E5%AE%9A%E4%B9%89%E5%AE%9E%E7%8E%B0json%E5%93%8D%E5%BA%94**%0A!%5B3b79f6550770b5a16269c05b5790642c.png%5D(en-resource%3A%2F%2Fdatabase%2F4855%3A1)%0A!%5Be060b20a16ee910bf1d80ccb15230bd7.png%5D(en-resource%3A%2F%2Fdatabase%2F4857%3A1)%0A%0A**%E4%BD%BF%E7%94%A8ResponseBody%E5%AE%9E%E7%8E%B0%E5%93%8D%E5%BA%94**%0A%E5%89%8D%E7%AB%AF%0A%60%60%60HTML%0A%3Chtml%3E%0A%3Chead%3E%0A%20%20%20%20%3Ctitle%3ETitle%3C%2Ftitle%3E%0A%20%20%20%20%3Cscript%20type%3D%22text%2Fjavascript%22%20src%3D%22%24%7BpageContext.request.contextPath%7D%2Fjs%2Fjquery-3.4.1.min.js%22%3E%3C%2Fscript%3E%0A%20%20%20%20%3Cscript%20type%3D%22text%2Fjavascript%22%3E%0A%20%20%20%20%20%20%20%20%2F%2F%E5%BC%82%E6%AD%A5%E5%8A%A0%E8%BD%BD%0A%20%20%20%20%20%20%20%20%24(function%20()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%24(%22%23testJson%22).click(function%20()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24.ajax(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%22post%22%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20url%3A%22%24%7BpageContext.request.contextPath%7D%2FtestResponseJson%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20contentType%3A%22application%2Fjson%3Bcharset%3DUTF-8%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20data%3A'%7B%22id%22%3A1%2C%22name%22%3A%22test%22%2C%22money%22%3A999%7D'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20dataType%3A%22json%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20success%3Afunction%20(data)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20alert(data)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20alert(data.name)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%3C%2Fscript%3E%0A%3C%2Fhead%3E%0A%3Cbody%3E%0A%20%20%20%20%3C!--%20%E6%B5%8B%E8%AF%95%E5%BC%82%E6%AD%A5%E8%AF%B7%E6%B1%82%20--%3E%0A%20%20%20%20%3Cinput%20type%3D%22button%22%20value%3D%22%20%E6%B5%8B%E8%AF%95%20ajax%20%E8%AF%B7%E6%B1%82%20json%20%E5%92%8C%E5%93%8D%E5%BA%94%20json%22%20id%3D%22testJson%22%2F%3E%0A%3C%2Fbody%3E%0A%3C%2Fhtml%3E%0A%60%60%60%0A%E5%90%8E%E7%AB%AF%EF%BC%9A%E5%B0%86json%E6%95%B0%E6%8D%AE%E5%B0%81%E8%A3%85%E5%88%B0JavaBean%E4%B8%AD%0A%60%60%60java%0A%40RequestMapping(value%20%3D%20%22%2FtestResponseJson%22)%0Apublic%20%40ResponseBody%20Account%20testResponseJson(%40RequestBody%20Account%20account)%7B%0A%20%20%20%20System.out.println(account)%3B%0A%20%20%20%20account.setName(%22jj%22)%3B%0A%20%20%20%20return%20account%3B%0A%7D%0A%60%60%60%0APOM%E5%9D%90%E6%A0%87%EF%BC%9A%E5%AF%BC%E5%85%A5jackson%E5%8C%85%0A%60%60%60XML%0ASpring5.0%E4%BB%A5%E4%B8%8A%E9%9C%80%E8%A6%81jackson%E5%8C%852.7%E4%BB%A5%E4%B8%8A%0A%3C!--%20%E8%A7%A3%E6%9E%90json%E6%95%B0%E6%8D%AE--%3E%0A%3Cdependency%3E%0A%20%20%20%20%3CgroupId%3Ecom.fasterxml.jackson.core%3C%2FgroupId%3E%0A%20%20%20%20%3CartifactId%3Ejackson-databind%3C%2FartifactId%3E%0A%20%20%20%20%3Cversion%3E2.9.6%3C%2Fversion%3E%0A%3C%2Fdependency%3E%0A%3Cdependency%3E%0A%20%20%20%20%3CgroupId%3Ecom.fasterxml.jackson.core%3C%2FgroupId%3E%0A%20%20%20%20%3CartifactId%3Ejackson-core%3C%2FartifactId%3E%0A%20%20%20%20%3Cversion%3E2.9.6%3C%2Fversion%3E%0A%3C%2Fdependency%3E%0A%3Cdependency%3E%0A%20%20%20%20%3CgroupId%3Ecom.fasterxml.jackson.core%3C%2FgroupId%3E%0A%20%20%20%20%3CartifactId%3Ejackson-annotations%3C%2FartifactId%3E%0A%20%20%20%20%3Cversion%3E2.9.6%3C%2Fversion%3E%0A%3C%2Fdependency%3E%0A%60%60%60%0A%0A*%20*%20*%0A%23%23%23%23%20SpringMVC%E5%AE%9E%E7%8E%B0%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%0A%23%23%23%23%23%20%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E7%9A%84%E5%BF%85%E8%A6%81%E5%89%8D%E6%8F%90%0A!%5Bb8c4d7a9abcb8c4362ef713ea63b2dd7.png%5D(en-resource%3A%2F%2Fdatabase%2F4859%3A1)%0A%23%23%23%23%23%20%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E5%8E%9F%E7%90%86%0A!%5B47b32b26d64e77d9671f1746e6fd75a3.png%5D(en-resource%3A%2F%2Fdatabase%2F4861%3A1)%0A%23%23%23%23%23%20%E5%AF%BC%E5%85%A5%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E7%9B%B8%E5%85%B3jar%E5%8C%85%0A%60%60%60%0A%3Cdependency%3E%0A%20%20%20%20%3CgroupId%3Ecommons-fileupload%3C%2FgroupId%3E%0A%20%20%20%20%3CartifactId%3Ecommons-fileupload%3C%2FartifactId%3E%0A%20%20%20%20%3Cversion%3E1.4%3C%2Fversion%3E%0A%3C%2Fdependency%3E%0A%3Cdependency%3E%0A%20%20%20%20%3CgroupId%3Ecommons-io%3C%2FgroupId%3E%0A%20%20%20%20%3CartifactId%3Ecommons-io%3C%2FartifactId%3E%0A%20%20%20%20%3Cversion%3E2.6%3C%2Fversion%3E%0A%3C%2Fdependency%3E%0A%60%60%60%0A%23%23%23%23%23%20%E5%9C%A8springmvc%E4%B8%AD%E9%85%8D%E7%BD%AE%E5%AF%BC%E5%85%A5%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E8%A7%A3%E6%9E%90%E5%99%A8%0A%60%60%60XML%0A%3C!--%20%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E8%A7%A3%E6%9E%90%E5%99%A8%EF%BC%8Cid%E5%BF%85%E9%A1%BB%E6%98%AFmultipartResolver--%3E%0A%3Cbean%20id%3D%22multipartResolver%22%20class%3D%22org.springframework.web.multipart.commons.CommonsMultipartResolver%22%3E%0A%20%20%20%20%3Cproperty%20name%3D%22maxUploadSize%22%20value%3D%225242880%22%2F%3E%0A%3C%2Fbean%3E%0A%60%60%60%0A%23%23%23%23%23%20%E5%9C%A8Handler%E4%B8%AD%E7%BC%96%E5%86%99%E9%80%BB%E8%BE%91%E4%BB%A3%E7%A0%81%0A%E4%BC%A0%E7%BB%9F%E6%96%B9%E5%BC%8F%0A%60%60%60java%0A%40RequestMapping(%22%2FtestFileUpload%22)%0Apublic%20String%20testFileUpload(HttpServletRequest%20request)%7B%0A%20%20%20%20%2F%2F1.%E5%88%A4%E6%96%AD%E8%A1%A8%E5%8D%95%E6%98%AF%E5%90%A6%E6%94%AF%E6%8C%81%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%0A%20%20%20%20boolean%20isMultiForm%20%3D%20ServletFileUpload.isMultipartContent(request)%3B%0A%20%20%20%20if(!isMultiForm)%7B%0A%20%20%20%20%20%20%20%20return%20%22error%22%3B%0A%20%20%20%20%7D%0A%20%20%20%20%2F%2F2.%E5%88%9B%E5%BB%BADiskFileItemFactory%E5%AF%B9%E8%B1%A1%0A%20%20%20%20DiskFileItemFactory%20factory%20%3D%20new%20DiskFileItemFactory()%3B%0A%2F%2F%E8%AE%BE%E7%BD%AE%E7%BC%93%E5%AD%98%E6%96%87%E4%BB%B6%E7%9A%84%E7%9B%AE%E5%BD%95%0A%2F%2Fcommons-fileupload%E6%98%AF%E4%BD%BF%E7%94%A8%E7%BC%93%E5%AD%98%E7%9A%84%0A%2F%2F%E5%8E%9F%E5%88%99%EF%BC%9A%0A%2F%2F%E5%A4%A7%E5%B0%8F%E6%98%AF%E5%90%A6%E8%B6%85%E8%BF%8710kb%0A%2F%2F%E8%B6%85%E8%BF%87%EF%BC%9A%E4%BD%BF%E7%94%A8%E4%B8%B4%E6%97%B6%E6%96%87%E4%BB%B6%E4%BD%9C%E4%B8%BA%E7%BC%93%E5%AD%98%0A%2F%2F%E4%B8%8D%E8%B6%85%E8%BF%87%EF%BC%9A%E4%BD%BF%E7%94%A8%E5%86%85%E5%AD%98%E4%BD%9C%E4%B8%BA%E7%BC%93%E5%AD%98%0A%20%20%20%20factory.setRepository(new%20File(%22D%3A%2F%2Ftemp%22))%3B%0A%20%20%20%20%2F%2F3.%E5%88%9B%E5%BB%BAServletFileUpload%E5%AF%B9%E8%B1%A1%0A%20%20%20%20ServletFileUpload%20sfu%20%3D%20new%20ServletFileUpload(factory)%3B%0A%20%20%20%20%2F%2F4.%E8%A7%A3%E6%9E%90request%EF%BC%8C%E5%BE%97%E5%88%B0FileItem%E5%AF%B9%E8%B1%A1%E7%9A%84%E9%9B%86%E5%90%88%0A%20%20%20%20List%3CFileItem%3E%20items%20%3D%20sfu.parseRequest(request)%3B%0A%20%20%20%20%2F%2F5.%E5%88%A4%E6%96%ADFileItem%E6%98%AF%E5%90%A6%E6%98%AF%E6%96%87%E4%BB%B6%E5%AD%97%E6%AE%B5%0A%20%20%20%20for(FileItem%20item%3Aitems)%7B%0A%20%20%20%20%20%20%20%20if(item.isFormField())%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F6.%E4%B8%8D%E6%98%AF%0A%20%20%20%20%20%20%20%20%20%20%20%20String%20fieldName%20%3D%20item.getFieldName()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20String%20fieldValue%20%3D%20item.getString(%22UTF-8%22)%3B%0A%20%20%20%20%20%20%20%20%7Delse%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F7.%E6%98%AF%EF%BC%8C%E5%86%99%E6%96%87%E4%BB%B6%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%E8%8E%B7%E5%8F%96%E6%96%87%E4%BB%B6%E7%9A%84%E4%BF%9D%E5%AD%98%E8%B7%AF%E5%BE%84%0A%20%20%20%20%20%20%20%20%20%20%20%20String%20basePath%20%3D%20reqeust.getServletContext.getRealPath(%22WEB-INF%2Fuploads%22)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20File%20file%20%3D%20new%20File(basePath)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if(!file.exists()%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20file.mkdirs()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%E8%8E%B7%E5%8F%96%E6%96%87%E4%BB%B6%E5%90%8D%0A%20%20%20%20%20%20%20%20%20%20%20%20String%20fileName%20%3D%20item.getName()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20String%20uudi%20%3D%20UUID.randomUUID().toString().replace(%22-%22%2C%22%22).toUpperCase()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20fileName%20%3D%20uuid%2B%22_%22%2BfileName%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20item.write(new%20File(file%2CfileName))%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%E5%88%A0%E9%99%A4%E4%B8%B4%E6%97%B6%E6%96%87%E4%BB%B6%0A%20%20%20%20%20%20%20%20%20%20%20%20item.delete()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%2F%2F6.%E6%98%AF%EF%BC%9A%E5%86%99%E6%96%87%E4%BB%B6%0A%20%20%20%20%2F%2F7.%E4%B8%8D%E6%98%AF%EF%BC%9A%E6%89%93%E5%8D%B0%E8%BE%93%E5%87%BA%0A%20%20%20%20%2F%2F8.%E9%87%8A%E6%94%BE%E6%B5%81%0A%7D%0A%60%60%60%0ASpringMVC%E6%8F%90%E4%BE%9B%E7%9A%84%E6%96%B9%E5%BC%8F%0A%E5%B0%81%E8%A3%85%E4%BA%86FileItem%0A%60%60%60java%0A%40RequestMapping(value%20%3D%20%22%2FtestFileUpload%22)%0Apublic%20String%20testFileUpload(HttpServletRequest%20request%2C%20MultipartFile%20uploadFile)%20%7B%0A%20%20%20%20%2F%2F%E5%AD%98%E5%85%A5%E6%96%87%E4%BB%B6%E7%9A%84%E6%96%87%E4%BB%B6%E5%90%8D%0A%20%20%20%20String%20filename%20%3D%20null%3B%0A%20%20%20%20%2F%2F1.%E8%8E%B7%E5%8F%96%E4%B8%8A%E4%BC%A0%E6%96%87%E4%BB%B6%E7%9A%84%E6%96%87%E4%BB%B6%E5%90%8D%0A%20%20%20%20String%20uploadFilename%20%3D%20uploadFile.getOriginalFilename()%3B%0A%20%20%20%20%2F%2F2.%E6%88%AA%E5%8F%96%E6%96%87%E4%BB%B6%E6%89%A9%E5%B1%95%E5%90%8D%0A%20%20%20%20String%20extentName%20%3D%20uploadFilename.substring(uploadFilename.indexOf(%22.%22)%20%2B%201%2C%20uploadFilename.length())%3B%0A%20%20%20%20%2F%2F3.%E6%8A%8A%E6%96%87%E4%BB%B6%E5%8A%A0%E4%B8%8A%E9%9A%8F%E6%9C%BA%E6%95%B0%EF%BC%8C%E9%98%B2%E6%AD%A2%E6%96%87%E4%BB%B6%E9%87%8D%E5%A4%8D%0A%20%20%20%20String%20uuid%20%3D%20UUID.randomUUID().toString().replace(%22-%22%2C%20%22%22).toUpperCase()%3B%0A%20%20%20%20filename%20%3D%20uuid%20%2B%20%22.%22%20%2B%20extentName%3B%0A%20%20%20%20System.out.println(filename)%3B%0A%20%20%20%20%2F%2F4.%E8%8E%B7%E5%8F%96%E6%96%87%E4%BB%B6%E8%B7%AF%E5%BE%84%0A%20%20%20%20String%20path%20%3D%20request.getSession().getServletContext().getRealPath(%22%2Fuploads%2F%22)%3B%0A%20%20%20%20System.out.println(path)%3B%0A%20%20%20%20%2F%2F5.%E5%88%A4%E6%96%AD%E8%B7%AF%E5%BE%84%E6%98%AF%E5%90%A6%E5%AD%98%E5%9C%A8%0A%20%20%20%20File%20file%20%3D%20new%20File(path)%3B%0A%20%20%20%20if%20(!file.exists())%20%7B%0A%20%20%20%20%20%20%20%20file.mkdirs()%3B%0A%20%20%20%20%7D%0A%20%20%20%20%2F%2F6.%E4%BD%BF%E7%94%A8MultipartFile%E6%8E%A5%E5%8F%A3%E5%B0%86%E6%96%87%E4%BB%B6%E5%86%99%E5%85%A5%E6%8C%87%E5%AE%9A%E4%BD%8D%E7%BD%AE%0A%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20uploadFile.transferTo(new%20File(file%2C%20filename))%3B%0A%20%20%20%20%7D%20catch%20(IOException%20e)%20%7B%0A%20%20%20%20%20%20%20%20System.out.println(%22%E4%B8%8A%E4%BC%A0%E5%A4%B1%E8%B4%A5%22)%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20%22success%22%3B%0A%7D%0A%60%60%60%0A%E6%96%87%E4%BB%B6%E4%BF%9D%E5%AD%98%E4%BD%8D%E7%BD%AE%0A!%5Bb37e3b145ab9dad910a819cefeb2004d.png%5D(en-resource%3A%2F%2Fdatabase%2F4863%3A1)%0A%0A%23%23%23%23%20SpringMVC%E5%AE%9E%E7%8E%B0%E8%B7%A8%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%0A%23%23%23%23%23%20%E5%88%86%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84%E7%9B%AE%E7%9A%84%0A!%5B39c916bdf99ba8e3d8a6d93710301f98.png%5D(en-resource%3A%2F%2Fdatabase%2F4829%3A1)%0A%23%23%23%23%23%20%E5%BC%80%E5%8F%91%E6%AD%A5%E9%AA%A4%0A%23%23%23%23%23%20%E9%85%8D%E7%BD%AETomcat%E6%9C%8D%E5%8A%A1%E5%99%A8%0Atomcat%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%BB%98%E8%AE%A4%E6%98%AF%E7%A6%81%E6%AD%A2%E4%B8%8A%E4%BC%A0%E6%96%87%E4%BB%B6%E7%9A%84%EF%BC%8C%E5%9B%A0%E6%AD%A4%E8%A6%81%E4%BF%AE%E6%94%B9tomcat%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84web.xml%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%0A%E4%B8%8D%E4%BF%AE%E6%94%B9%E4%BC%9A%E6%8A%A5%E9%94%99%EF%BC%9A%E6%8A%A5%E9%94%99%E4%BF%A1%E6%81%AF405%2F403%20%E3%80%80%0A!%5B7f9c6e779d6d9bf032375f3df8c88a70.png%5D(en-resource%3A%2F%2Fdatabase%2F4873%3A1)%0A%23%23%23%23%23%20%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E6%9C%8D%E5%8A%A1%E5%99%A8%0A**Tomcat%E6%9C%8D%E5%8A%A1%E5%99%A8**%0A!%5B296aac3e208152e082e60119538fceca.png%5D(en-resource%3A%2F%2Fdatabase%2F4867%3A1)%0A**POM%E5%9D%90%E6%A0%87**%0A%60%60%60XML%0A%3Cdependency%3E%0A%20%20%20%20%3CgroupId%3Ecom.sun.jersey%3C%2FgroupId%3E%0A%20%20%20%20%3CartifactId%3Ejersey-core%3C%2FartifactId%3E%0A%20%20%20%20%3Cversion%3E1.19.4%3C%2Fversion%3E%0A%3C%2Fdependency%3E%0A%3Cdependency%3E%0A%20%20%20%20%3CgroupId%3Ecom.sun.jersey%3C%2FgroupId%3E%0A%20%20%20%20%3CartifactId%3Ejersey-client%3C%2FartifactId%3E%0A%20%20%20%20%3Cversion%3E1.19.4%3C%2Fversion%3E%0A%3C%2Fdependency%3E%0A%60%60%60%0A**%E7%95%8C%E9%9D%A2**%0A!%5Ba405b4b77517f64d62d963691421c785.png%5D(en-resource%3A%2F%2Fdatabase%2F4865%3A1)%0A**Controller**%0A%60%60%60java%0A%40Controller(%22fileUploadController1%22)%0A%40RequestMapping(%22%2Fspringmvc%22)%0Apublic%20class%20FileController1%20%7B%0A%20%20%20%20%2F%2F%E7%94%A8%E4%BA%8E%E6%8C%87%E5%AE%9A%E5%9B%BE%E7%89%87%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84%E5%9C%B0%E5%9D%80%EF%BC%8C%E5%9C%A8%E5%AE%9E%E9%99%85%E5%BC%80%E5%8F%91%E4%B8%AD%EF%BC%8C%E5%8F%AF%E4%BB%A5%E5%86%99%E5%88%B0%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%B8%AD%0A%20%20%20%20private%20static%20final%20String%20IMAGESERVERPATH%20%3D%20%22http%3A%2F%2Flocalhost%3A9090%2Fday02_eesy_03resourcesserver_war%2Fuploads%2F%22%3B%0A%0A%20%20%20%20%40RequestMapping(value%20%3D%20%22%2FtestFileUpload1%22)%0A%20%20%20%20public%20String%20testFileUpload(HttpServletRequest%20request%2C%20MultipartFile%20uploadFile)%20throws%20IOException%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%E5%AD%98%E5%85%A5%E6%96%87%E4%BB%B6%E7%9A%84%E6%96%87%E4%BB%B6%E5%90%8D%0A%20%20%20%20%20%20%20%20String%20filename%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20%2F%2F1.%E8%8E%B7%E5%8F%96%E4%B8%8A%E4%BC%A0%E6%96%87%E4%BB%B6%E7%9A%84%E6%96%87%E4%BB%B6%E5%90%8D%0A%20%20%20%20%20%20%20%20String%20uploadFilename%20%3D%20uploadFile.getOriginalFilename()%3B%0A%20%20%20%20%20%20%20%20%2F%2F2.%E6%88%AA%E5%8F%96%E6%96%87%E4%BB%B6%E6%89%A9%E5%B1%95%E5%90%8D%0A%20%20%20%20%20%20%20%20String%20extentName%20%3D%20uploadFilename.substring(uploadFilename.indexOf(%22.%22)%20%2B%201%2C%20uploadFilename.length())%3B%0A%20%20%20%20%20%20%20%20%2F%2F3.%E6%8A%8A%E6%96%87%E4%BB%B6%E5%8A%A0%E4%B8%8A%E9%9A%8F%E6%9C%BA%E6%95%B0%EF%BC%8C%E9%98%B2%E6%AD%A2%E6%96%87%E4%BB%B6%E9%87%8D%E5%A4%8D%0A%20%20%20%20%20%20%20%20String%20uuid%20%3D%20UUID.randomUUID().toString().replace(%22-%22%2C%20%22%22).toUpperCase()%3B%0A%20%20%20%20%20%20%20%20filename%20%3D%20uuid%20%2B%20%22.%22%20%2B%20extentName%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F4.%E8%8E%B7%E5%8F%96jersey%E7%9A%84jar%E5%8C%85%E4%B8%AD%E6%8F%90%E4%BE%9B%E7%9A%84Client%E5%AF%B9%E8%B1%A1%0A%20%20%20%20%20%20%20%20Client%20client%20%3D%20Client.create()%3B%0A%20%20%20%20%20%20%20%20%2F%2F5.%E5%BB%BA%E7%AB%8B%E5%92%8C%E5%9B%BE%E7%89%87%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84%E8%BF%9E%E6%8E%A5%0A%20%20%20%20%20%20%20%20WebResource%20resource%20%3D%20client.resource(IMAGESERVERPATH%20%2B%20filename)%3B%0A%20%20%20%20%20%20%20%20%2F%2F6.%E6%8A%8A%E6%96%87%E4%BB%B6%E5%86%99%E5%88%B0%E8%BF%9C%E7%A8%8B%E6%9C%8D%E5%8A%A1%E5%99%A8%0A%20%20%20%20%20%20%20%20String%20result%20%3D%20resource.put(String.class%2CuploadFile.getBytes())%3B%0A%20%20%20%20%20%20%20%20System.out.println(result)%3B%0A%20%20%20%20%20%20%20%20return%20%22success%22%3B%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A**springmvc.xml%E7%9A%84%E9%85%8D%E7%BD%AE**%0A%60%60%60XML%0A%3C!--%20%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E8%A7%A3%E6%9E%90%E5%99%A8%EF%BC%8Cid%E5%BF%85%E9%A1%BB%E6%98%AFmultipartResolver--%3E%0A%3Cbean%20id%3D%22multipartResolver%22%20class%3D%22org.springframework.web.multipart.commons.CommonsMultipartResolver%22%3E%0A%20%20%20%20%3Cproperty%20name%3D%22maxUploadSize%22%20value%3D%225242880%22%2F%3E%0A%3C%2Fbean%3E%0A%60%60%60%0A%23%23%23%23%23%20%E5%9B%BE%E7%89%87%E6%96%87%E4%BB%B6%E6%9C%8D%E5%8A%A1%E5%99%A8%0A**Tomcat%E6%9C%8D%E5%8A%A1%E5%99%A8**%0A!%5B595dd915fca6a4317e2612e81e5f4b25.png%5D(en-resource%3A%2F%2Fdatabase%2F4869%3A1)%0A**%E6%96%B0%E5%BB%BA%E4%B8%80%E4%B8%AAwebapp%E5%BA%94%E7%94%A8%E9%83%A8%E7%BD%B2%E5%88%B0%E8%AF%A5%E6%9C%8D%E5%8A%A1%E5%99%A8**%0A**%E5%9C%A8Tomcat%E9%83%A8%E7%BD%B2%E5%90%8E%E7%9A%84%E6%96%87%E4%BB%B6%E5%A4%B9%E4%B8%8B%E9%9D%A2%E6%96%B0%E5%BB%BA%E4%B8%80%E4%B8%AAuploads%E6%96%87%E4%BB%B6%E5%A4%B9**%0A%E6%B2%A1%E6%9C%89%E8%AF%A5%E6%96%87%E4%BB%B6%E5%A4%B9%E4%BC%9A%E6%8A%A5%E9%94%99%EF%BC%9A409%0A!%5B9d3e3a33af5b7c8eaacab585ada36fc8.png%5D(en-resource%3A%2F%2Fdatabase%2F4875%3A1)%0A%0A*%20*%20*%0A%0A%23%23%23%23%20SpringMVC%E4%B8%AD%E7%9A%84%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%0A%E5%BC%82%E5%B8%B8%E5%88%86%E4%B8%BA%EF%BC%9A%0A%E9%A2%84%E6%9C%9F%E5%BC%82%E5%B8%B8%E5%92%8C%E8%BF%90%E8%A1%8C%E6%97%B6%E5%BC%82%E5%B8%B8RuntimeException%0A%E5%89%8D%E8%80%85%E9%80%9A%E8%BF%87%E6%8D%95%E8%8E%B7%E5%BC%82%E5%B8%B8%E4%BB%8E%E8%80%8C%E8%8E%B7%E5%8F%96%E5%BC%82%E5%B8%B8%E4%BF%A1%E6%81%AF%EF%BC%8C%E5%90%8E%E8%80%85%E4%B8%BB%E8%A6%81%E9%80%9A%E8%BF%87%E8%A7%84%E8%8C%83%E4%BB%A3%E7%A0%81%E5%BC%80%E5%8F%91%E3%80%81%E6%B5%8B%E8%AF%95%E6%89%8B%E6%AE%B5%E5%87%8F%E5%B0%91%E5%BC%82%E5%B8%B8%E7%9A%84%E5%8F%91%E7%94%9F%0A**spring%E6%A1%86%E6%9E%B6%E7%9A%84%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%E9%80%BB%E8%BE%91**%0A!%5Bf1c6c290407989ee4a3de33acd9142ef.png%5D(en-resource%3A%2F%2Fdatabase%2F4877%3A1)%0A%23%23%23%23%23%20%E8%87%AA%E5%AE%9A%E4%B9%89%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%0A%E8%87%AA%E5%AE%9A%E4%B9%89%E5%BC%82%E5%B8%B8%E7%B1%BB%EF%BC%9A%0A%60%60%60java%0Apublic%20class%20CustomException%20extends%20Exception%20%7B%0A%20%20%20%20%2F%2F%E5%AE%9A%E4%B9%89%E5%BC%82%E5%B8%B8%E4%BF%A1%E6%81%AF%0A%20%20%20%20private%20String%20message%3B%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20%E9%80%9A%E8%BF%87%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E8%8E%B7%E5%8F%96%E5%BC%82%E5%B8%B8%E4%BF%A1%E6%81%AF%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20%40param%20message%0A%20%20%20%20%20*%2F%0A%20%20%20%20public%20CustomException(String%20message)%20%7B%0A%20%20%20%20%20%20%20%20this.message%20%3D%20message%3B%0A%20%20%20%20%7D%0A%20%20%20%20%2F%2F%E8%8E%B7%E5%8F%96%E5%BC%82%E5%B8%B8%E4%BF%A1%E6%81%AF%0A%20%20%20%20public%20String%20getMessage()%20%7B%0A%20%20%20%20%20%20%20%20return%20message%3B%0A%20%20%20%20%7D%0A%20%20%20%20public%20void%20setMessage(String%20message)%20%7B%0A%20%20%20%20%20%20%20%20this.message%20%3D%20message%3B%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%E8%87%AA%E5%AE%9A%E4%B9%89%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%E7%B1%BB%EF%BC%9A%0A%60%60%60java%0Apublic%20class%20CustomExceptionResolver%20implements%20HandlerExceptionResolver%20%7B%0A%20%20%20%20%40Override%0A%20%20%20%20public%20ModelAndView%20resolveException(HttpServletRequest%20httpServletRequest%2C%20HttpServletResponse%20httpServletResponse%2C%20Object%20o%2C%20Exception%20e)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%E6%89%93%E5%8D%B0%E5%BC%82%E5%B8%B8%E4%BF%A1%E6%81%AF%0A%20%20%20%20%20%20%20%20e.printStackTrace()%3B%0A%20%20%20%20%20%20%20%20%2F%2F%E5%AE%9A%E4%B9%89%E4%B8%80%E4%B8%AA%E8%87%AA%E5%B7%B1%E7%9A%84%E5%BC%82%E5%B8%B8%E7%B1%BB%E5%AF%B9%E8%B1%A1%0A%20%20%20%20%20%20%20%20CustomException%20customException%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20%2F%2F%E5%88%A4%E6%96%AD%E5%BD%93%E5%89%8D%E4%BC%A0%E5%85%A5%E7%9A%84%E5%BC%82%E5%B8%B8%E5%AF%B9%E8%B1%A1%E6%98%AF%E5%90%A6%E6%98%AF%E8%87%AA%E5%AE%9A%E4%B9%89%E5%BC%82%E5%B8%B8%E5%AF%B9%E8%B1%A1%0A%20%20%20%20%20%20%20%20if(e%20instanceof%20CustomException)%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20customException%20%3D%20(CustomException)%20e%3B%0A%20%20%20%20%20%20%20%20%7Delse%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20customException%20%3D%20new%20CustomException(%22%E7%B3%BB%E7%BB%9F%E9%97%AE%E9%A2%98%EF%BC%8C%E8%AF%B7%E8%81%94%E7%B3%BB%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86%E5%91%98%22)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20ModelAndView%20mv%20%3D%20new%20ModelAndView()%3B%0A%20%20%20%20%20%20%20%20mv.setViewName(%22error%22)%3B%0A%20%20%20%20%20%20%20%20mv.addObject(%22errorMessage%22%2CcustomException.getMessage())%3B%0A%20%20%20%20%20%20%20%20return%20mv%3B%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%E5%9C%A8springmvc%E4%B8%AD%E9%85%8D%E7%BD%AE%E8%87%AA%E5%AE%9A%E4%B9%89%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%E7%B1%BB%0A%E4%BD%BF%E7%94%A8%40ControllerAdvice%E6%B3%A8%E8%A7%A3%E4%BB%A3%E6%9B%BF%0A%60%60%60XML%0A%3C!--%20%E9%85%8D%E7%BD%AE%E8%87%AA%E5%AE%9A%E4%B9%89%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%E5%99%A8%20--%3E%0A%3Cbean%20id%3D%22handlerExceptionResolver%22%0A%20%20%20%20%20%20class%3D%22com.itheima.web.exception.CustomExceptionResolver%22%2F%3E%0A%60%60%60%0A%E6%8A%9B%E5%87%BA%E8%87%AA%E5%AE%9A%E4%B9%89%E5%BC%82%E5%B8%B8%0A%60%60%60java%0A%40Controller(%22exceptionController%22)%0A%40RequestMapping(value%20%3D%20%22%2Fspringmvc%22)%0Apublic%20class%20ExceptionController%20%7B%0A%20%20%20%20%40RequestMapping(value%20%3D%20%22%2FtestException%22)%0A%20%20%20%20public%20String%20testException(String%20username)%20throws%20CustomException%20%7B%0A%20%20%20%20%20%20%20%20System.out.println(%22%E6%89%A7%E8%A1%8CtestException%E6%96%B9%E6%B3%95%22)%3B%0A%20%20%20%20%20%20%20%20System.out.println(username)%3B%0A%20%20%20%20%20%20%20%20%2F%2F%E5%88%A4%E6%96%AD%E7%94%A8%E6%88%B7%E5%90%8D%E6%98%AF%E5%90%A6%E4%B8%BA%E7%A9%BA%EF%BC%8C%E5%A6%82%E6%9E%9C%E4%B8%BA%E7%A9%BA%EF%BC%8C%E5%88%99%E6%8A%9B%E5%87%BA%E5%BC%82%E5%B8%B8%0A%20%20%20%20%20%20%20%20if(StringUtils.isEmpty(username))%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20throw%20new%20CustomException(%22%E8%BE%93%E5%85%A5%E4%B8%BA%E7%A9%BA%22)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20%22success%22%3B%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A*%20*%20*%0A%23%23%23%23%20SpringMVC%E7%9A%84%E6%8B%A6%E6%88%AA%E5%99%A8%0A**%E6%8B%A6%E6%88%AA%E5%99%A8%E7%9A%84%E4%BD%9C%E7%94%A8**%0A!%5B5961baa6ea5c7464901cc314c1bedba0.png%5D(en-resource%3A%2F%2Fdatabase%2F4883%3A1)%0A%23%23%23%23%23%20%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8B%A6%E6%88%AA%E5%99%A8%0A**%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8B%A6%E6%88%AA%E5%99%A8**%0A%60%60%60java%0Apublic%20class%20MyIntercepter2%20implements%20HandlerInterceptor%20%7B%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20%E5%BD%93%E8%AF%B7%E6%B1%82%E5%88%B0%E8%BE%BE%E6%97%B6%EF%BC%8C%E6%AD%A4%E6%96%B9%E6%B3%95%E5%85%88%E6%89%A7%E8%A1%8C%0A%20%20%20%20%20*%20%E6%AD%A4%E6%96%B9%E6%B3%95%E7%9A%84%E8%BF%94%E5%9B%9E%E5%80%BC%E5%86%B3%E5%AE%9A%E6%98%AF%E5%90%A6%E6%94%BE%E8%A1%8C%0A%20%20%20%20%20*%20%E8%BF%94%E5%9B%9Etrue%EF%BC%9A%E6%94%BE%E8%A1%8C%20%20%20%20%E6%94%BE%E8%A1%8C%E7%9A%84%E5%90%AB%E4%B9%89%EF%BC%9A%E5%A6%82%E6%9E%9C%E6%9C%89%E4%B8%8B%E4%B8%80%E4%B8%AA%E6%8B%A6%E6%88%AA%E5%99%A8%E6%89%A7%E8%A1%8C%E4%B8%8B%E4%B8%80%E4%B8%AA%EF%BC%8C%E5%A6%82%E6%9E%9C%E5%BD%93%E5%89%8D%E6%8B%A6%E6%88%AA%E5%99%A8%E5%A4%84%E4%BA%8E%E6%9C%80%E5%90%8E%E4%B8%80%E4%B8%AA%EF%BC%8C%E5%88%99%E6%89%A7%E8%A1%8Chandler%E6%96%B9%E6%B3%95%EF%BC%88%E6%8E%A7%E5%88%B6%E5%99%A8%E4%B8%AD%E6%96%B9%E6%B3%95%0A%20%20%20%20%20*%20%E8%BF%94%E5%9B%9Efalse%EF%BC%9A%E4%B8%8D%E6%94%BE%E8%A1%8C%0A%20%20%20%20%20*%2F%0A%20%20%20%20%40Override%0A%20%20%20%20public%20boolean%20preHandle(HttpServletRequest%20request%2C%20HttpServletResponse%20response%2C%20Object%20handler)%20throws%20Exception%20%7B%0A%20%20%20%20%20%20%20%20System.out.println(%22%E6%8B%A6%E6%88%AA%E5%99%A82%E6%89%A7%E8%A1%8CpreHandle%E6%96%B9%E6%B3%95%22)%3B%0A%20%20%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%7D%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20%E8%B0%83%E7%94%A8%E6%9D%A1%E4%BB%B6%EF%BC%9A%0A%20%20%20%20%20*%20%E5%9C%A8%E6%8B%A6%E6%88%AA%E5%99%A8%E9%93%BE%E5%86%85%E6%89%80%E6%9C%89%E6%8B%A6%E6%88%AA%E5%99%A8%E8%BF%94%E6%88%90%E5%8A%9F%E8%B0%83%E7%94%A8%20%0A%20%20%20%20%20*%20%E8%B0%83%E7%94%A8%E9%A1%BA%E5%BA%8F%EF%BC%9A%0A%20%20%20%20%20*%20Controller%E4%B8%ADhandler%E6%96%B9%E6%B3%95%E4%B9%8B%E5%90%8E%0A%20%20%20%20%20*%20%E4%BD%9C%E7%94%A8%EF%BC%9A%0A%20%20%20%20%20*%20%E5%9C%A8%E4%B8%9A%E5%8A%A1%E5%A4%84%E7%90%86%E5%99%A8%E5%A4%84%E7%90%86%E5%AE%8C%E8%AF%B7%E6%B1%82%E5%90%8E%EF%BC%8C%E4%BD%86%E6%98%AF%20DispatcherServlet%20%E5%90%91%E5%AE%A2%E6%88%B7%E7%AB%AF%E8%BF%94%E5%9B%9E%E5%93%8D%E5%BA%94%E5%89%8D%E8%A2%AB%E8%B0%83%E7%94%A8%EF%BC%8C%0A%20%20%20%20%20*%20%E5%9C%A8%E8%AF%A5%E6%96%B9%E6%B3%95%E4%B8%AD%E5%AF%B9%E7%94%A8%E6%88%B7%E8%AF%B7%E6%B1%82%20request%20%E8%BF%9B%E8%A1%8C%E5%A4%84%E7%90%86%E3%80%82%0A%20%20%20%20%20*%2F%0A%20%20%20%20%40Override%0A%20%20%20%20public%20void%20postHandle(HttpServletRequest%20request%2C%20HttpServletResponse%20response%2C%20Object%20handler%2C%20ModelAndView%20modelAndView)%20throws%20Exception%20%7B%0A%20%20%20%20%20%20%20%20System.out.println(%22%E6%8B%A6%E6%88%AA%E5%99%A82%E6%89%A7%E8%A1%8CpostHandle%E6%96%B9%E6%B3%95%22)%3B%0A%20%20%20%20%7D%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20%E8%B0%83%E7%94%A8%E6%9D%A1%E4%BB%B6%EF%BC%9A%0A%20%20%20%20%20*%20%E5%8F%AA%E8%A6%81%20preHandle%20%E8%BF%94%E5%9B%9E%20true%20%E5%B0%B1%E8%B0%83%E7%94%A8%0A%20%20%20%20%20*%20%E8%B0%83%E7%94%A8%E9%A1%BA%E5%BA%8F%EF%BC%9A%0A%20%20%20%20%20*%20%E5%9C%A8postHandle%E6%96%B9%E6%B3%95%E4%B9%8B%E5%90%8E%E8%B0%83%E7%94%A8%0A%20%20%20%20%20*%20%E4%BD%9C%E7%94%A8%EF%BC%9A%0A%20%20%20%20%20*%20%E5%9C%A8%20DispatcherServlet%20%E5%AE%8C%E5%85%A8%E5%A4%84%E7%90%86%E5%AE%8C%E8%AF%B7%E6%B1%82%E5%90%8E%E8%A2%AB%E8%B0%83%E7%94%A8%EF%BC%8C%0A%20%20%20%20%20*%20%E5%8F%AF%E4%BB%A5%E5%9C%A8%E8%AF%A5%E6%96%B9%E6%B3%95%E4%B8%AD%E8%BF%9B%E8%A1%8C%E4%B8%80%E4%BA%9B%E8%B5%84%E6%BA%90%E6%B8%85%E7%90%86%E7%9A%84%E6%93%8D%E4%BD%9C%E3%80%82%0A%20%20%20%20%20*%2F%0A%20%20%20%20%40Override%0A%20%20%20%20public%20void%20afterCompletion(HttpServletRequest%20request%2C%20HttpServletResponse%20response%2C%20Object%20handler%2C%20Exception%20ex)%20throws%20Exception%20%7B%0A%20%20%20%20%20%20%20%20System.out.println(%22%E6%8B%A6%E6%88%AA%E5%99%A82%E6%89%A7%E8%A1%8CafterCompletion%E6%96%B9%E6%B3%95%22)%3B%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A**springmvc%E4%B8%AD%E9%85%8D%E7%BD%AE%E6%8B%A6%E6%88%AA%E5%99%A8**%0A%60%60%60XML%0A%3C!--%20%E9%85%8D%E7%BD%AEspringmvc%E7%9A%84%E6%8B%A6%E6%88%AA%E5%99%A8--%3E%0A%3Cmvc%3Ainterceptors%3E%0A%20%20%20%20%3Cmvc%3Ainterceptor%3E%0A%20%20%20%20%20%20%20%20%3C!--%20%E7%94%A8%E4%BA%8E%E6%8C%87%E5%AE%9A%E6%8B%A6%E6%88%AA%E8%AF%B7%E6%B1%82%E6%98%A0%E5%B0%84--%3E%0A%20%20%20%20%20%20%20%20%3Cmvc%3Amapping%20path%3D%22%2F**%22%2F%3E%0A%20%20%20%20%20%20%20%20%3C!--%20%E9%85%8D%E7%BD%AE%E6%8B%A6%E6%88%AA%E5%99%A8--%3E%0A%20%20%20%20%20%20%20%20%3Cbean%20id%3D%22MyIntercepter1%22%20class%3D%22com.itheima.web.intercepter.MyIntercepter1%22%2F%3E%0A%20%20%20%20%3C%2Fmvc%3Ainterceptor%3E%0A%3C%2Fmvc%3Ainterceptors%3E%0A%60%60%60%0A**%E6%89%A7%E8%A1%8C%E7%BB%93%E6%9E%9C**%0A!%5B367b35ca050da9907a2e1a4fe34e7453.png%5D(en-resource%3A%2F%2Fdatabase%2F4885%3A1)%0A%23%23%23%23%23%20%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8B%A6%E6%88%AA%E5%99%A8%E6%A0%88%0A**%E5%AE%9A%E4%B9%89%E4%B8%A4%E4%B8%AA%E6%8B%A6%E6%88%AA%E5%99%A8**%0A**%E5%9C%A8springmvc%E4%B8%AD%E9%85%8D%E7%BD%AE%E4%B8%A4%E4%B8%AA%E6%8B%A6%E6%88%AA%E5%99%A8**%0A%60%60%60XML%0A%3C!--%20%E9%85%8D%E7%BD%AEspringmvc%E7%9A%84%E6%8B%A6%E6%88%AA%E5%99%A8--%3E%0A%3Cmvc%3Ainterceptors%3E%0A%20%20%20%20%3C!--%20%E6%8B%A6%E6%88%AA%E5%99%A8%E6%89%A7%E8%A1%8C%E9%A1%BA%E5%BA%8F%E4%B8%8E%E8%BF%99%E9%87%8C%E9%85%8D%E7%BD%AE%E7%9B%B8%E5%85%B3--%3E%0A%20%20%20%20%3Cmvc%3Ainterceptor%3E%0A%20%20%20%20%20%20%20%20%3C!--%20%E7%94%A8%E4%BA%8E%E6%8C%87%E5%AE%9A%E6%8B%A6%E6%88%AA%E8%AF%B7%E6%B1%82%E6%98%A0%E5%B0%84--%3E%0A%20%20%20%20%20%20%20%20%3Cmvc%3Amapping%20path%3D%22%2F**%22%2F%3E%0A%20%20%20%20%20%20%20%20%3C!--%20%E9%85%8D%E7%BD%AE%E6%8B%A6%E6%88%AA%E5%99%A8--%3E%0A%20%20%20%20%20%20%20%20%3Cbean%20id%3D%22MyIntercepter1%22%20class%3D%22com.itheima.web.intercepter.MyIntercepter1%22%2F%3E%0A%20%20%20%20%3C%2Fmvc%3Ainterceptor%3E%0A%20%20%20%20%3Cmvc%3Ainterceptor%3E%0A%20%20%20%20%20%20%20%20%3Cmvc%3Amapping%20path%3D%22%2F**%22%2F%3E%0A%20%20%20%20%20%20%20%20%3Cbean%20id%3D%22MyIntercepter2%22%20class%3D%22com.itheima.web.intercepter.MyIntercepter2%22%2F%3E%0A%20%20%20%20%3C%2Fmvc%3Ainterceptor%3E%0A%3C%2Fmvc%3Ainterceptors%3E%0A%60%60%60%0A**%E6%89%A7%E8%A1%8C%E7%BB%93%E6%9E%9C**%0A!%5B37e55f1f0eb54e7198f2fd966afd49e3.png%5D(en-resource%3A%2F%2Fdatabase%2F4887%3A1)%0A**%E5%BD%93%E6%8B%A6%E6%88%AA%E5%99%A82%E7%9A%84preHandle%E6%96%B9%E6%B3%95%E6%8B%A6%E6%88%AA%EF%BC%88%E8%BF%94%E5%9B%9Efalse%EF%BC%89%E6%97%B6%E7%9A%84%E7%BB%93%E6%9E%9C**%0A!%5B6da31c6c6837fe9148c2440d6d22b29c.png%5D(en-resource%3A%2F%2Fdatabase%2F4889%3A1)%0A%23%23%23%23%23%20%E6%8B%A6%E6%88%AA%E5%99%A8%E7%9A%84%E7%AE%80%E5%8D%95%E6%A1%88%E4%BE%8B%0A**%E6%A1%88%E4%BE%8B%E8%AF%B4%E6%98%8E**%0A!%5B0bd37871cbd0ca46cb12540c18a4c406.png%5D(en-resource%3A%2F%2Fdatabase%2F4891%3A1)%0A%E6%8B%A6%E6%88%AA%E5%99%A8%E4%BB%A3%E7%A0%81%0A!%5Bfdd7f0fea4eeec508e6620cda9609523.png%5D(en-resource%3A%2F%2Fdatabase%2F4895%3A1)%0A%E6%8E%A7%E5%88%B6%E5%99%A8%E4%BB%A3%E7%A0%81%0A!%5B14cc911e507a5673e368218fe47a4ba6.png%5D(en-resource%3A%2F%2Fdatabase%2F4897%3A1)%0A%0A%0A</center></span>
</div></body></html> 